目的

TypeScriptビルドエラー「Property 'id' does not exist on type 'unknown'.」を解消する。
handleMaybeSingleResult の戻り値に適切な型を付与し、呼び出し側で org.id にアクセス可能にする。
既存の型運用方針に合わせつつ最小差分で修正する。
前提

Supabaseクライアントは createClient() で型パラメータが設定済み、または可能であれば設定する。
handleMaybeSingleResult は共通エラーハンドリングユーティリティとして利用中。
タスクA（推奨・最小差分）

handleMaybeSingleResult をジェネリクス対応に変更
ファイル: src/lib/error-mapping.ts（または定義元ファイル）
変更内容: 下記の関数定義で置き換える（Postgrest型への依存は最小限）
コード

// src/lib/error-mapping.ts

import
 
type
 { PostgrestError } 
from
 
'@supabase/supabase-js'
;
// 共通のMaybeSingle型（必要に応じて実際の戻り値型に調整）

type
 MaybeSingleResult<T> =
  | { 
data
: T | 
null
; error: 
null
 }
  | { 
data
: 
null
; error: PostgrestError };
export
 
function
 
handleMaybeSingleResult
<
T
>(

  result: MaybeSingleResult<T>,
  label: 
string

): 
T
 
{
  
if
 (
'error'
 
in
 result && result.error) {
    
throw
 
new
 
Error
(
`
${label}
: 
${result.error.message}
`
);
  }
  
if
 (!(
'data'
 
in
 result) || !result.data) {
    
throw
 
new
 
Error
(
`
${label}
: not found`
);
  }
  
return
 result.data;
}

呼び出し側をジェネリック指定に更新
エラー箇所付近（org.id にアクセスしている箇所）で、対象レコードの型を最小定義し、handleMaybeSingleResult に型引数を渡す。
例（実コードに合わせてフィールドを最小限で定義）

type
 OrgMin = { 
id
: 
string
 };
const
 result = 
await
 supabase
  .from(
'organizations'
)
  .select(
'id'
)
  .eq(
'id'
, targetOrgId)
  .maybeSingle();
const
 org = handleMaybeSingleResult<OrgMin>(result, 
'所属組織'
);
targetOrgId = org.id;

備考

もし supabase-js の戻り値型と型定義がズレている場合は、MaybeSingleResult を下記いずれかに合わせて微調整
{ data: T | null; error: PostgrestError | null }
PostgrestMaybeSingleResponse に合わせる（型をimportして利用）
組織テーブルの型が既に Database 型に含まれている場合は、その型を OrgMin の代わりに参照してもよい（厳密化）。
タスクB（オプション・応急処置）

どうしてもAが適用できない一時的状況では、呼び出し側で型アサーションを入れる。
ただし最終的にはAに戻す。
例

const
 org = handleMaybeSingleResult(result, 
'所属組織'
) 
as
 { 
id
: 
string
 };
targetOrgId = org.id;

検証

npm run typecheck / build が通ること
既存の handleMaybeSingleResult 呼び出し箇所が破壊されないこと（型引数未指定の場合も既存挙動を維持）
追加のTSエラーが出た場合は、同様にジェネリック型パターンで段階的に解消
出力

変更差分（該当ファイルのパッチ or 完全コード）
追加で発生した型エラーがあれば一覧と最小修正案 [Claude Prompt 終了]
必要なら、Supabaseクライアントの型強化（createClient()）も併せて実施してください。



