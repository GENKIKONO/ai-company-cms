あなたはClaude Codeです。  
AIOHub 本番で「ログイン後に refresh-token だけが残り、auth-token Cookie が欠落する」致命的バグを今すぐ修正してください。

【前提（確定事項）】
- Supabase 側（Auth設定 / RLS / 権限）は問題なし
- クライアントサイド signIn はすべて廃止済み
- /auth/signin は /auth/login に統一済み
- 問題は Next.js + @supabase/ssr の server-side Cookie ブリッジ実装のみ
- 現象: POST /api/auth/login の Set-Cookie に auth-token が出ない

【ゴール（これ以外やるな）】
1. POST /api/auth/login のレスポンスに
   - sb-<project>-auth-token
   - sb-<project>-refresh-token
   の両方が Set-Cookie される
2. /api/health/login-cookie-contract が contractStatus: "VALID" になる
3. /api/health/auth-snapshot で hasAuthTokenCookie: true になる
4. 既存の Health Only CI は壊さない

【必須作業】
- createServerClient の Cookie ブリッジを公式パターンに完全準拠させる
- cookies().set() / remove() を正しく実装する
- middleware.ts が Edge Runtime なら nodejs に変更
- Set-Cookie を手動で生成・補完するフォールバックは禁止
- 「警告ログだけ出す」コードは削除

【やってはいけないこと】
- 新しい診断APIを増やす
- Cookieを手動で生成する
- httpOnly の是非を独自判断で変える
- 新しい認証経路を作る

【成果物】
- 修正コミット
- 変更ファイル一覧
- 修正理由を1行で説明
- 本番SHAを提示

この修正が完了したら、それ以上の改善提案は不要です。
