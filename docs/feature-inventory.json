{
  "project": {
    "name": "AIOHub",
    "version": "0.1.1",
    "generatedAt": "2024-11-20T00:00:00Z",
    "analysisCompleteness": 70,
    "totalFiles": 640,
    "totalPages": 106,
    "totalApiRoutes": 171
  },
  "architecture": {
    "framework": "Next.js 15 (App Router)",
    "database": "Supabase (PostgreSQL + RLS)",
    "authentication": "Supabase Auth",
    "payments": "Stripe (segment-based pricing)",
    "deployment": "Vercel",
    "bundleSize": "~200MB"
  },
  "features": {
    "authentication": {
      "name": "èªè¨¼ãƒ»ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†",
      "icon": "ğŸ”",
      "status": "implemented",
      "testCoverage": 90,
      "subFeatures": {
        "login": {
          "name": "ãƒ­ã‚°ã‚¤ãƒ³",
          "page": "/auth/login",
          "api": "/api/auth/session",
          "testStatus": "e2e_complete",
          "riskLevel": "low"
        },
        "signup": {
          "name": "ã‚µã‚¤ãƒ³ã‚¢ãƒƒãƒ—", 
          "page": "/auth/signup",
          "api": "/api/auth/session",
          "testStatus": "e2e_complete",
          "riskLevel": "low"
        },
        "passwordReset": {
          "name": "ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãƒªã‚»ãƒƒãƒˆ",
          "page": "/auth/forgot-password",
          "testStatus": "basic_check",
          "riskLevel": "medium"
        },
        "sessionManagement": {
          "name": "ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†",
          "api": "/api/me",
          "testStatus": "smoke_test",
          "riskLevel": "low"
        }
      }
    },
    "organizationManagement": {
      "name": "çµ„ç¹”ãƒ»ä»£ç†åº—ç®¡ç†",
      "icon": "ğŸ¢",
      "status": "partial",
      "testCoverage": 60,
      "subFeatures": {
        "organizationCreation": {
          "name": "çµ„ç¹”ä½œæˆ",
          "page": "/organizations/new", 
          "api": "/api/organizations",
          "testStatus": "e2e_complete",
          "riskLevel": "low"
        },
        "organizationDetails": {
          "name": "çµ„ç¹”è©³ç´°",
          "page": "/organizations/[id]",
          "testStatus": "e2e_complete", 
          "riskLevel": "low"
        },
        "publicOrganizationPages": {
          "name": "çµ„ç¹”å…¬é–‹ãƒšãƒ¼ã‚¸",
          "page": "/o/[slug]",
          "api": "/api/public/organizations/[slug]",
          "testStatus": "display_check",
          "riskLevel": "medium"
        },
        "agencyManagement": {
          "name": "ä»£ç†åº—ç®¡ç†",
          "page": "/agency/*",
          "testStatus": "untested",
          "riskLevel": "high",
          "note": "æœªè§£æ - B2Bå±•é–‹ã¸ã®å½±éŸ¿"
        },
        "organizationGroups": {
          "name": "çµ„ç¹”ã‚°ãƒ«ãƒ¼ãƒ—",
          "page": "/admin/org-groups",
          "api": "/api/admin/org-groups",
          "testStatus": "admin_tested",
          "riskLevel": "medium"
        }
      }
    },
    "contentManagement": {
      "name": "ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ",
      "icon": "ğŸ“",
      "status": "implemented",
      "testCoverage": 70,
      "subFeatures": {
        "posts": {
          "name": "æŠ•ç¨¿ç®¡ç†",
          "page": "/dashboard/posts",
          "api": "/api/my/posts", 
          "testStatus": "e2e_complete",
          "riskLevel": "low"
        },
        "services": {
          "name": "ã‚µãƒ¼ãƒ“ã‚¹ç®¡ç†",
          "page": "/dashboard/services",
          "api": "/api/my/services",
          "testStatus": "basic_check",
          "riskLevel": "medium"
        },
        "faqs": {
          "name": "FAQç®¡ç†",
          "page": "/my/faqs",
          "api": "/api/my/faqs", 
          "testStatus": "basic_check",
          "riskLevel": "medium"
        },
        "caseStudies": {
          "name": "ã‚±ãƒ¼ã‚¹ã‚¹ã‚¿ãƒ‡ã‚£",
          "page": "/organizations/[id]/case-studies",
          "api": "/api/my/case-studies",
          "testStatus": "basic_check",
          "riskLevel": "medium"
        },
        "materials": {
          "name": "ç´ æç®¡ç†",
          "page": "/dashboard/materials",
          "api": "/api/my/materials", 
          "testStatus": "basic_check",
          "riskLevel": "medium"
        }
      }
    },
    "billing": {
      "name": "æ±ºæ¸ˆãƒ»ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³",
      "icon": "ğŸ’³", 
      "status": "implemented",
      "testCoverage": 85,
      "subFeatures": {
        "segmentedPricing": {
          "name": "ã‚»ã‚°ãƒ¡ãƒ³ãƒˆåˆ¥ä¾¡æ ¼",
          "api": "/api/billing/checkout-segmented",
          "testStatus": "e2e_complete",
          "riskLevel": "low",
          "segments": {
            "test_user": { "discount": "30%", "tested": true },
            "early_user": { "discount": "20%", "tested": true },
            "normal_user": { "discount": "0%", "tested": true }
          }
        },
        "planManagement": {
          "name": "ãƒ—ãƒ©ãƒ³ç®¡ç†",
          "plans": ["starter", "pro", "business", "enterprise"],
          "testStatus": "e2e_complete",
          "riskLevel": "low"
        },
        "customerPortal": {
          "name": "é¡§å®¢ãƒãƒ¼ã‚¿ãƒ«",
          "api": "/api/billing/portal",
          "testStatus": "basic_check",
          "riskLevel": "medium"
        },
        "webhooks": {
          "name": "Stripe Webhook",
          "api": "/api/stripe/webhook",
          "testStatus": "untested",
          "riskLevel": "high"
        }
      }
    },
    "aiAnalytics": {
      "name": "AIå¯è¦–æ€§ãƒ»ã‚¢ãƒŠãƒªãƒ†ã‚£ã‚¯ã‚¹", 
      "icon": "ğŸ“Š",
      "status": "critical_untested",
      "testCoverage": 5,
      "businessImpact": "revenue_critical",
      "subFeatures": {
        "visibilityScoreCalculation": {
          "name": "AIå¯è¦–æ€§ã‚¹ã‚³ã‚¢è¨ˆç®—",
          "api": "/api/analytics/ai/recalculate",
          "testStatus": "untested",
          "riskLevel": "critical",
          "businessImpact": "revenue_direct"
        },
        "visibilityDataRetrieval": {
          "name": "å¯è¦–æ€§ãƒ‡ãƒ¼ã‚¿å–å¾—",
          "api": "/api/analytics/ai/visibility", 
          "testStatus": "untested",
          "riskLevel": "critical",
          "businessImpact": "customer_experience"
        },
        "combinedReporting": {
          "name": "çµ±åˆãƒ¬ãƒãƒ¼ãƒˆ",
          "api": "/api/analytics/ai/combined",
          "testStatus": "untested", 
          "riskLevel": "critical",
          "businessImpact": "competitive_advantage"
        },
        "botLogAnalysis": {
          "name": "ãƒœãƒƒãƒˆãƒ­ã‚°åˆ†æ",
          "api": "/api/analytics/ai/bot-logs",
          "testStatus": "untested",
          "riskLevel": "medium"
        },
        "seoIntegration": {
          "name": "SEOé€£æº",
          "api": "/api/analytics/seo/gsc",
          "testStatus": "untested", 
          "riskLevel": "medium"
        },
        "dashboardCards": {
          "name": "AIãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰",
          "page": "/dashboard",
          "components": ["AIVisibilityCard", "PerformanceMetrics"],
          "testStatus": "basic_display",
          "riskLevel": "medium",
          "technicalDebt": "useEffect warnings"
        }
      }
    },
    "embedWidgets": {
      "name": "åŸ‹ã‚è¾¼ã¿Widgetãƒ»å…¬é–‹API",
      "icon": "ğŸ¯",
      "status": "critical_untested", 
      "testCoverage": 0,
      "businessImpact": "public_facing",
      "subFeatures": {
        "iframeEmbeds": {
          "name": "iframeåŸ‹ã‚è¾¼ã¿",
          "api": "/api/public/embed/[slug]/iframe",
          "testStatus": "untested",
          "riskLevel": "critical", 
          "publicFacing": true
        },
        "widgetEmbeds": {
          "name": "WidgetåŸ‹ã‚è¾¼ã¿", 
          "api": "/api/public/embed/[slug]/widget",
          "testStatus": "untested",
          "riskLevel": "critical",
          "publicFacing": true
        },
        "legacyEmbeds": {
          "name": "ãƒ¬ã‚¬ã‚·ãƒ¼åŸ‹ã‚è¾¼ã¿",
          "apis": [
            "/api/public/embed/iframe/[slug]",
            "/api/public/embed/widget/[slug]"
          ],
          "testStatus": "untested",
          "riskLevel": "medium"
        },
        "publicApi": {
          "name": "å…¬é–‹API",
          "apis": [
            "/api/public/organizations",
            "/api/public/posts", 
            "/api/public/faqs",
            "/api/public/case-studies",
            "/api/public/services",
            "/api/public/stats"
          ],
          "testStatus": "partial_smoke", 
          "riskLevel": "medium"
        },
        "seoStructuredData": {
          "name": "SEOãƒ»æ§‹é€ åŒ–ãƒ‡ãƒ¼ã‚¿",
          "apis": [
            "/api/public/[slug]/jsonld",
            "/api/public/sitemap"
          ],
          "testStatus": "implemented",
          "riskLevel": "low"
        }
      }
    },
    "adminManagement": {
      "name": "ç®¡ç†ãƒ»ç›£æŸ»æ©Ÿèƒ½",
      "icon": "ğŸ‘‘",
      "status": "partial",
      "testCoverage": 40,
      "subFeatures": {
        "managementConsole": {
          "name": "ç®¡ç†ã‚³ãƒ³ã‚½ãƒ¼ãƒ«",
          "page": "/management-console",
          "subPages": [
            "reports", "users", "settings", "contacts", 
            "hearings", "embed-dashboard", "security"
          ],
          "testStatus": "basic_access",
          "riskLevel": "medium",
          "permissionLevel": "organization_admin"
        },
        "systemAdmin": {
          "name": "ã‚·ã‚¹ãƒ†ãƒ ç®¡ç†",
          "page": "/admin",
          "subFeatures": {
            "aiVisibilityManagement": {
              "name": "AIå¯è¦–æ€§ç®¡ç†",
              "apis": ["/api/admin/ai-visibility/latest", "/api/admin/ai-visibility/run"],
              "testStatus": "basic_check",
              "riskLevel": "medium"
            },
            "materialStats": {
              "name": "ç´ æçµ±è¨ˆ",
              "api": "/api/admin/material-stats",
              "testStatus": "basic_check", 
              "riskLevel": "low"
            },
            "qnaStats": {
              "name": "Q&Açµ±è¨ˆ",
              "api": "/api/admin/qna-stats",
              "testStatus": "basic_check",
              "riskLevel": "low"
            },
            "billingAnalytics": {
              "name": "è«‹æ±‚åˆ†æ",
              "apis": [
                "/api/admin/billing-analytics/trends",
                "/api/admin/billing-analytics/campaigns", 
                "/api/admin/billing-analytics/summary"
              ],
              "testStatus": "undetailed",
              "riskLevel": "medium"
            },
            "featureManagement": {
              "name": "æ©Ÿèƒ½ç®¡ç†",
              "api": "/api/admin/feature-management",
              "testStatus": "undetailed", 
              "riskLevel": "medium"
            }
          },
          "permissionLevel": "system_admin"
        },
        "enforcement": {
          "name": "Enforcement (ç›£æŸ»ãƒ»åŸ·è¡Œ)",
          "status": "critical_untested",
          "riskLevel": "critical", 
          "businessImpact": "account_control",
          "subFeatures": {
            "violationDetection": {
              "name": "é•åæ¤œå‡º",
              "api": "/api/enforcement/violations",
              "riskLevel": "critical",
              "potentialImpact": "false_positives"
            },
            "warningActions": {
              "name": "è­¦å‘Šå‡¦ç†", 
              "api": "/api/enforcement/actions/warn",
              "riskLevel": "high",
              "potentialImpact": "customer_relations"
            },
            "suspensionActions": {
              "name": "ã‚¢ã‚«ã‚¦ãƒ³ãƒˆåœæ­¢",
              "api": "/api/enforcement/actions/suspend",
              "riskLevel": "critical",
              "potentialImpact": "revenue_loss"
            },
            "freezeActions": {
              "name": "ã‚¢ã‚«ã‚¦ãƒ³ãƒˆå‡çµ",
              "api": "/api/enforcement/actions/freeze", 
              "riskLevel": "critical",
              "potentialImpact": "legal_issues"
            },
            "reinstateActions": {
              "name": "å¾©å¸°å‡¦ç†",
              "api": "/api/enforcement/actions/reinstate",
              "riskLevel": "high",
              "potentialImpact": "operational_confusion"
            }
          }
        }
      }
    },
    "monitoring": {
      "name": "ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°ãƒ»è¨ºæ–­",
      "icon": "ğŸ“±", 
      "status": "implemented",
      "testCoverage": 50,
      "subFeatures": {
        "diagnosticEndpoints": {
          "name": "è¨ºæ–­ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ",
          "apis": {
            "/api/diag/echo": { "function": "ãƒªã‚¯ã‚¨ã‚¹ãƒˆè§£æ", "testStatus": "smoke_tested" },
            "/api/diag/env": { "function": "ç’°å¢ƒå¤‰æ•°ç¢ºèª", "testStatus": "smoke_tested" },
            "/api/diag/database": { "function": "DBæ¥ç¶šç¢ºèª", "testStatus": "basic_check" },
            "/api/diag/auth-context": { "function": "èªè¨¼çŠ¶æ…‹ç¢ºèª", "testStatus": "basic_check" },
            "/api/diag/security": { "function": "ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ç¢ºèª", "testStatus": "basic_check" },
            "/api/diag/comprehensive": { "function": "çµ±åˆè¨ºæ–­", "testStatus": "basic_check" }
          },
          "riskLevel": "low"
        },
        "metricsMonitoring": {
          "name": "ãƒ¡ãƒˆãƒªã‚¯ã‚¹ãƒ»ç›£è¦–",
          "apis": [
            "/api/monitoring/metrics", 
            "/api/health/*"
          ],
          "testStatus": "undetailed",
          "riskLevel": "medium"
        },
        "errorTracking": {
          "name": "ã‚¨ãƒ©ãƒ¼ç›£è¦–",
          "service": "Sentry",
          "status": "implemented",
          "testStatus": "integrated",
          "riskLevel": "low"
        }
      }
    }
  },
  "database": {
    "type": "Supabase (PostgreSQL)",
    "tables": [
      "users", "organizations", "posts", "services", "faqs", 
      "case_studies", "materials", "subscriptions", 
      "ai_visibility_scores", "violations", "audit_logs"
    ],
    "rls": {
      "implemented": true,
      "testStatus": "basic_confirmed",
      "detailsAnalyzed": false
    }
  },
  "codeQuality": {
    "eslintWarnings": {
      "total": 40,
      "useEffectDependencies": 38,
      "nextImageOptimization": 2,
      "severity": "medium"
    },
    "typeScriptErrors": 0,
    "backupFiles": {
      "count": "10+", 
      "location": "src/lib/embed/*, src/lib/icons/*",
      "action": "delete_safe"
    },
    "technicalDebt": {
      "todoFixme": 10,
      "locations": [
        "src/app/api/analytics/ai/recalculate/route.ts",
        "src/app/api/analytics/ai/visibility/route.ts", 
        "src/lib/auth/admin-auth.ts",
        "src/lib/monitoring/index.ts"
      ]
    }
  },
  "testCoverage": {
    "overall": 45,
    "categories": {
      "authentication": 90,
      "billing": 85, 
      "contentManagement": 70,
      "organizationManagement": 60,
      "monitoring": 50,
      "adminManagement": 40,
      "aiAnalytics": 5,
      "embedWidgets": 0,
      "enforcement": 0
    }
  },
  "riskAssessment": {
    "critical": [
      {
        "area": "aiAnalytics",
        "reason": "Revenue-critical functionality untested",
        "impact": "Business continuity"
      },
      {
        "area": "enforcement", 
        "reason": "Account control system untested",
        "impact": "Customer relations, legal issues"
      },
      {
        "area": "embedWidgets",
        "reason": "Public-facing functionality untested", 
        "impact": "Brand reputation"
      }
    ],
    "high": [
      {
        "area": "agencyManagement",
        "reason": "B2B functionality unverified",
        "impact": "Business expansion"
      },
      {
        "area": "useEffectWarnings", 
        "reason": "Performance and bug risks",
        "impact": "User experience"
      }
    ],
    "medium": [
      {
        "area": "apiCoverage",
        "reason": "Limited smoke test coverage",
        "impact": "Operational reliability"
      }
    ]
  },
  "actionPlan": {
    "immediate": {
      "timeframe": "This week",
      "priority": "critical",
      "actions": [
        "Implement AI Analytics API smoke tests",
        "Implement Enforcement API tests", 
        "Implement Embed Widget E2E tests",
        "Delete backup files (.bak*)",
        "Fix simple useEffect warnings"
      ]
    },
    "shortTerm": {
      "timeframe": "This month", 
      "priority": "high",
      "actions": [
        "Verify agency management functionality",
        "Expand API smoke test coverage",
        "Fix complex useEffect warnings",
        "Implement performance tests"
      ]
    },
    "longTerm": {
      "timeframe": "Next quarter",
      "priority": "medium", 
      "actions": [
        "Comprehensive security testing",
        "Load testing and capacity planning", 
        "Technical debt reduction",
        "Advanced monitoring implementation"
      ]
    }
  },
  "metadata": {
    "generatedBy": "Claude Code AI Assistant",
    "analysisDate": "2024-11-20",
    "contextLimitations": [
      "Dynamic content not analyzed",
      "Production environment specifics unknown",
      "External service dependencies not verified", 
      "Performance characteristics not measured"
    ],
    "generatedArtifacts": [
      "scripts/api-smoke-test-critical.js",
      "scripts/fix-useeffect-warnings.js", 
      ".github/workflows/mandatory-pr-checks.yml",
      "docs/feature-inventory.md",
      "docs/feature-inventory.json"
    ]
  }
}