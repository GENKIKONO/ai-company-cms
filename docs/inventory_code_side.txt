================================================================================
                        ã‚³ãƒ¼ãƒ‰ãƒ™ãƒ¼ã‚¹ DBæ¥ç¶šæ£šå¸ã—
                        (inventory_code_side.txt)

                        ç”Ÿæˆæ—¥: 2024-12-22
                        æ›´æ–°æ—¥: 2024-12-23
                        DBæ¤œè¨¼æ—¥: 2024-12-23ï¼ˆSupabaseã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆç¢ºèªæ¸ˆã¿ï¼‰
                        çµ±åˆãƒ¬ãƒãƒ¼ãƒˆ: docs/db_reconciliation_report.md

  â€» æœ¬ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¯å®ŸDBã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆã¨çµ±åˆæ¸ˆã¿
  â€» å·®åˆ†è©³ç´°ãƒ»ToDoä¸€è¦§ã¯ db_reconciliation_report.md ã‚’å‚ç…§
================================================================================

================================================================================
1. æ¦‚è¦
================================================================================

ã‚¹ã‚­ãƒ£ãƒ³ç¯„å›²:
- src/ é…ä¸‹ã®å…¨TypeScript/TSXãƒ•ã‚¡ã‚¤ãƒ«
- supabase/functions/ é…ä¸‹ã®Edge Functions
- src/types/supabase.ts ã®å‹å®šç¾©
- src/types/rpc.ts ã®RPC/Viewå‹å®šç¾©ï¼ˆæ–°è¦è¿½åŠ ï¼‰
- src/lib/realtime/constants.ts ã®Realtimeå®šæ•°ï¼ˆæ–°è¦è¿½åŠ ï¼‰

ã‚¹ã‚­ãƒ£ãƒ³å¯¾è±¡ãƒ‘ã‚¿ãƒ¼ãƒ³:
- supabase.from('ãƒ†ãƒ¼ãƒ–ãƒ«å')
- supabase.rpc('é–¢æ•°å')
- supabase.channel('ãƒˆãƒ”ãƒƒã‚¯å')
- supabase.storage.from('ãƒã‚±ãƒƒãƒˆå')

æ³¨æ„ç‚¹:
- å‹å®šç¾©ãƒ•ã‚¡ã‚¤ãƒ«(supabase.ts)ã¯DBå®Ÿæ…‹ã‚’åæ˜ 
- RPC/Viewå‹å®šç¾©(rpc.ts)ã¯æ‰‹å‹•ç®¡ç†ã€supabase gen typesã§æ›´æ–°ã•ã‚Œãªã„
- ã‚³ãƒ¼ãƒ‰å´ã§å‘¼ã³å‡ºã•ã‚Œã¦ã„ã¦ã‚‚DBã«å­˜åœ¨ã—ãªã„å¯èƒ½æ€§ã‚ã‚Š
- ç›£æŸ»ãƒ­ã‚°ã«ç—•è·¡ãŒãªã„ãƒ†ãƒ¼ãƒ–ãƒ«ã¯æœªç¨¼åƒã®å¯èƒ½æ€§ã‚ã‚Š

è¿½åŠ å‹å®šç¾©ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆ2024-12-23ï¼‰:
- src/types/rpc.ts: RPCé–¢æ•°ã®å¼•æ•°/æˆ»ã‚Šå€¤å‹ã€Viewå‹ã€Type Predicates
- src/lib/realtime/constants.ts: Realtimeãƒˆãƒ”ãƒƒã‚¯/ã‚¤ãƒ™ãƒ³ãƒˆ/è¨­å®šå®šæ•°
- src/lib/qna-stats/service.ts: Q&A StatsæŠ½è±¡åŒ–ãƒ¬ã‚¤ãƒ¤ãƒ¼ï¼ˆDBç§»è¡Œæº–å‚™ï¼‰

================================================================================
1.5 DBæ¤œè¨¼çµæœã‚µãƒãƒªãƒ¼ï¼ˆ2024-12-23ï¼‰
================================================================================

ã€ğŸ”´ æ—©æ€¥ã«å¯¾å¿œãŒå¿…è¦ã€‘
1. increment_org_interview_stats - RPCé–¢æ•°ãŒæœªå®Ÿè£…ï¼ˆã‚¢ãƒ—ãƒªãŒãƒ–ãƒ­ãƒƒã‚¯ã•ã‚Œã‚‹ï¼‰
2. ai_interview_logs - ãƒ†ãƒ¼ãƒ–ãƒ«åä¸ä¸€è‡´ï¼ˆæ­£ã—ãã¯ ai_interview_messagesï¼‰
3. fn_build_monthly_kpis - public ã¨ analytics ã«é‡è¤‡ï¼ˆã©ã¡ã‚‰ã‚’ä½¿ã†ã‹çµ±ä¸€å¿…è¦ï¼‰

ã€ğŸŸ¡ å­˜åœ¨ã—ãªã„ãŒé‹ç”¨å½±éŸ¿ã¯é™å®šçš„ã€‘
- organization_groups ãƒ†ãƒ¼ãƒ–ãƒ«
- qna_stats ãƒ†ãƒ¼ãƒ–ãƒ«ï¼ˆqna_events ã¯å­˜åœ¨ï¼‰
- user_violation_stats ãƒ†ãƒ¼ãƒ–ãƒ«
- ai_citation_kpis_daily ãƒ†ãƒ¼ãƒ–ãƒ«
- ai_citation_integrity_daily ãƒ†ãƒ¼ãƒ–ãƒ«
- site_settings ãƒ†ãƒ¼ãƒ–ãƒ«ï¼ˆcms_site_settings ã§ä»£æ›¿å¯èƒ½ï¼‰

ã€ğŸŸ¢ ç¢ºèªæ¸ˆã¿ãƒ»å•é¡Œãªã—ã€‘
- RPCé–¢æ•°: get_plan_features, count_report_regenerations, increment_used_count,
           log_service_role_action, get_database_stats, auto_block_ip,
           check_rate_limit_db, enqueue_embedding_job, enqueue_cache_invalidation
- View: user_organizations, view_org_plans, view_ai_starter_caps_current,
        view_report_regen_limit_current, v_ai_citations_aggregates,
        mv_ai_citations_org_period
- Realtime: RLSæœ‰åŠ¹ã€broadcast_changeså­˜åœ¨ã€privateãƒãƒ£ãƒ³ãƒãƒ«ãƒãƒªã‚·ãƒ¼è¨­å®šæ¸ˆã¿

ã€âš ï¸ ä»•æ§˜ç¢ºèªãŒå¿…è¦ã€‘
- auto_block_ip ã®æˆ»ã‚Šå€¤ãŒ uuidï¼ˆã‚³ãƒ¼ãƒ‰å´ã§ void æƒ³å®šã®å¯èƒ½æ€§ï¼‰
- report_jobs ã¨ monthly_report_jobs ãŒä¸¡æ–¹å­˜åœ¨ï¼ˆå½¹å‰²ã®æ˜ç¢ºåŒ–ãŒå¿…è¦ï¼‰

================================================================================
2. æ¥ç¶šãƒãƒƒãƒ—ï¼ˆé‡è¦ï¼‰
================================================================================

--------------------------------------------------------------------------------
2.1 HIGHå„ªå…ˆåº¦: æœˆæ¬¡ãƒ¬ãƒãƒ¼ãƒˆ/ã‚¸ãƒ§ãƒ–/Realtime
--------------------------------------------------------------------------------

â–  public.ai_monthly_reports
  ã‚³ãƒ¼ãƒ‰å‚ç…§å…ƒ:
  - src/lib/reports/client.ts: getReportsList(), getReportByPeriod(), getLatestReport()
  - src/lib/reports/realtime.ts: useReportRealtime() (postgres_changes)
  - src/app/api/my/reports/monthly/route.ts: GET
  - src/app/api/my/reports/monthly/[period]/route.ts: GET
  - src/app/api/my/reports/monthly/[period]/pdf/route.ts: GET
  - supabase/functions/monthly-report-generate/index.ts: upsert, update
  - supabase/functions/reports-worker/index.ts: update
  - supabase/functions/reports-get-current/index.ts: select
  - supabase/functions/reports-api/index.ts: select
  - supabase/functions/monthly-reports/index.ts: select, insert
  - supabase/functions/monthly-report-scheduler/index.ts: select
  çŠ¶æ…‹: âœ… æ¥ç¶šæ¸ˆã¿ã€ç¨¼åƒä¸­

â–  public.monthly_report_jobs
  ã‚³ãƒ¼ãƒ‰å‚ç…§å…ƒ:
  - src/lib/reports/client.ts: getJobsList(), checkActiveJob()
  - src/lib/reports/realtime.ts: useJobRealtime() (postgres_changes)
  - supabase/functions/monthly-report-generate/index.ts: insert, update, select
  çŠ¶æ…‹: âœ… æ¥ç¶šæ¸ˆã¿

â–  public.report_jobs (ãƒ¬ã‚¬ã‚·ãƒ¼?)
  ã‚³ãƒ¼ãƒ‰å‚ç…§å…ƒ:
  - supabase/functions/monthly-reports/index.ts: select, insert, update
  çŠ¶æ…‹: âš ï¸ monthly_report_jobs ã¨ã®é‡è¤‡å¯èƒ½æ€§ã€è¦ç¢ºèª

â–  public.report_regeneration_logs
  ã‚³ãƒ¼ãƒ‰å‚ç…§å…ƒ:
  - supabase/functions/reports-api/index.ts: select, insert
  - supabase/functions/monthly-reports/index.ts: insert
  çŠ¶æ…‹: âœ… æ¥ç¶šæ¸ˆã¿

â–  Realtime ãƒˆãƒ”ãƒƒã‚¯
  å®šæ•°ç®¡ç†: src/lib/realtime/constants.ts (CHANNEL_TOPICS, BROADCAST_EVENTS)
  - org:{orgId}:monthly_reports
    ä½¿ç”¨: src/lib/reports/realtime.ts, src/hooks/useMonthlyReportRealtime.ts
    è³¼èª­ãƒ†ãƒ¼ãƒ–ãƒ«: ai_monthly_reports (postgres_changes / broadcast)
    ã‚¤ãƒ™ãƒ³ãƒˆ: REPORT_CHANGE, REPORT_PUBLISHED
  - report:{orgId}:jobs
    ä½¿ç”¨: src/lib/reports/realtime.ts
    è³¼èª­ãƒ†ãƒ¼ãƒ–ãƒ«: monthly_report_jobs (postgres_changes / broadcast)
    ã‚¤ãƒ™ãƒ³ãƒˆ: JOB_CHANGE, JOB_ENQUEUED, JOB_COMPLETED
  - org:{orgId}:cms
    ä½¿ç”¨: src/hooks/useOrgRealtimeCms.ts
  - org:{orgId}:test
    ä½¿ç”¨: src/app/test/realtime/page.tsx (ãƒ†ã‚¹ãƒˆç”¨)
  çŠ¶æ…‹: âœ… private ãƒãƒ£ãƒ³ãƒãƒ«è¨­å®šæ¸ˆã¿ã€setAuth()å¯¾å¿œæ¸ˆã¿
  ç’°å¢ƒå¤‰æ•°:
  - NEXT_PUBLIC_REALTIME_BROADCAST_MODE: broadcaståˆ‡æ›¿
  - NEXT_PUBLIC_REALTIME_DEBUG: ãƒ‡ãƒãƒƒã‚°ãƒ­ã‚°
  - NEXT_PUBLIC_REALTIME_DISABLE_RECONNECT: å†æ¥ç¶šç„¡åŠ¹ï¼ˆãƒ†ã‚¹ãƒˆç”¨ï¼‰
  å†æ¥ç¶š: æŒ‡æ•°ãƒãƒƒã‚¯ã‚ªãƒ•ï¼ˆ500ms * 1.8^n, max 3å›ï¼‰

--------------------------------------------------------------------------------
2.2 MEDIUMå„ªå…ˆåº¦: çµ„ç¹”/RLSåŸºç›¤ã€CMSã€QA
--------------------------------------------------------------------------------

â–  public.organizations
  ã‚³ãƒ¼ãƒ‰å‚ç…§å…ƒ:
  - src/app/api/organizations/route.ts
  - src/app/api/my/organization/route.ts
  - src/app/api/public/organizations/route.ts
  - src/app/o/[slug]/page.tsx
  - supabase/functions/ghostwriter/index.ts
  - supabase/functions/monthly-report-scheduler/index.ts
  - supabase/functions/content-refresh-orchestrator/index.ts
  - (ä»–å¤šæ•°)
  çŠ¶æ…‹: âœ… é«˜é »åº¦ä½¿ç”¨

â–  public.organization_members
  ã‚³ãƒ¼ãƒ‰å‚ç…§å…ƒ:
  - src/app/api/test/e2e-me/route.ts
  - src/app/api/my/services/route.ts
  - src/app/api/my/interview-questions/route.ts
  - src/app/api/my/reports/monthly/[period]/server-action/route.ts
  - src/app/api/admin/my-organizations/route.ts
  çŠ¶æ…‹: âœ… RLSåŸºç›¤ã¨ã—ã¦ç¨¼åƒ

â–  public.posts
  ã‚³ãƒ¼ãƒ‰å‚ç…§å…ƒ:
  - src/app/api/posts/route.ts, [id]/route.ts
  - src/app/api/my/posts/route.ts, [id]/route.ts
  - src/app/api/public/o/[slug]/posts/[postId]/route.ts
  - src/app/feed.xml/route.ts
  - src/app/sitemap-news.xml/route.ts
  çŠ¶æ…‹: âœ… ç›£æŸ»ãƒ­ã‚°æœ‰ã‚Šã€é«˜é »åº¦

â–  public.services
  ã‚³ãƒ¼ãƒ‰å‚ç…§å…ƒ:
  - src/app/api/my/services/route.ts, [id]/route.ts
  - src/app/api/public/organizations/route.ts
  - src/app/api/public/services/route.ts
  - src/app/o/[slug]/page.tsx
  - supabase/functions/ghostwriter/index.ts
  çŠ¶æ…‹: âœ… ç›£æŸ»ãƒ­ã‚°æœ‰ã‚Šã€é«˜é »åº¦

â–  public.products / product_translations
  ã‚³ãƒ¼ãƒ‰å‚ç…§å…ƒ:
  - å‹å®šç¾©ã‚ã‚Š (src/types/supabase.ts)
  - ç›´æ¥ã‚¯ã‚¨ãƒª: æ¤œå‡ºã•ã‚Œãš
  çŠ¶æ…‹: âš ï¸ å‹å®šç¾©ã®ã¿ã€ã‚³ãƒ¼ãƒ‰æ¥ç¶šãªã—

â–  public.qa_entries
  ã‚³ãƒ¼ãƒ‰å‚ç…§å…ƒ:
  - src/app/api/my/qa/entries/route.ts, [id]/route.ts
  - src/app/api/my/qa/search/route.ts
  - src/app/api/qa/public/route.ts
  - src/app/test/realtime/page.tsx
  - src/app/o/[slug]/page.tsx
  çŠ¶æ…‹: âœ… ç›£æŸ»ãƒ­ã‚°æœ‰ã‚Š

â–  public.qa_categories
  ã‚³ãƒ¼ãƒ‰å‚ç…§å…ƒ:
  - src/app/api/my/qa/categories/route.ts, [id]/route.ts
  - src/app/api/my/qa/entries/[id]/route.ts
  - src/app/api/qa/public/route.ts
  çŠ¶æ…‹: âœ… æ¥ç¶šæ¸ˆã¿

â–  public.case_studies
  ã‚³ãƒ¼ãƒ‰å‚ç…§å…ƒ:
  - src/app/api/cases/route.ts
  - src/app/api/my/case-studies/route.ts, [id]/route.ts
  - src/app/api/public/case-studies/route.ts
  - src/app/o/[slug]/page.tsx
  çŠ¶æ…‹: âœ… ç›£æŸ»ãƒ­ã‚°æœ‰ã‚Š

â–  public.faqs
  ã‚³ãƒ¼ãƒ‰å‚ç…§å…ƒ:
  - src/app/api/faqs/route.ts
  - src/app/api/my/faqs/route.ts, [id]/route.ts
  - src/app/api/public/faqs/route.ts
  - src/app/faqs/[slug]/page.tsx
  - supabase/functions/ghostwriter/index.ts
  çŠ¶æ…‹: âœ… æ¥ç¶šæ¸ˆã¿

â–  public.cms_site_settings
  ã‚³ãƒ¼ãƒ‰å‚ç…§å…ƒ:
  - src/app/api/admin/cms/site-settings/route.ts
  - src/app/api/public/cms/route.ts
  çŠ¶æ…‹: âœ… æ¥ç¶šæ¸ˆã¿

â–  public.cms_sections (cms_assets ã‚‚)
  ã‚³ãƒ¼ãƒ‰å‚ç…§å…ƒ:
  - src/app/api/admin/cms/sections/route.ts
  - src/app/api/admin/cms/assets/route.ts
  çŠ¶æ…‹: âœ… æ¥ç¶šæ¸ˆã¿

--------------------------------------------------------------------------------
2.3 LOW/UNKNOWNå„ªå…ˆåº¦: æœªæ¥ç¶š/éƒ¨åˆ†æ¥ç¶š
--------------------------------------------------------------------------------

â–  AIã‚¤ãƒ³ã‚¿ãƒ“ãƒ¥ãƒ¼é–¢é€£
  - public.ai_interview_sessions
    ã‚³ãƒ¼ãƒ‰å‚ç…§å…ƒ:
    - src/app/api/ai-interview-sessions/route.ts
    - src/app/api/my/interview/sessions/route.ts, [id]/route.ts
    - src/app/api/my/ai-citations/route.ts
    - supabase/functions/ai-interview-finalize/index.ts
    çŠ¶æ…‹: âœ… æ¥ç¶šæ¸ˆã¿

  - public.ai_interview_messages
    å‹å®šç¾©: ã‚ã‚Š
    ã‚³ãƒ¼ãƒ‰å‚ç…§: ç›´æ¥ã‚¯ã‚¨ãƒªãªã—ï¼ˆsessionsçµŒç”±ã§å–å¾—ï¼Ÿï¼‰
    çŠ¶æ…‹: âš ï¸ è¦ç¢ºèª

  - public.ai_interview_axes / ai_interview_questions
    ã‚³ãƒ¼ãƒ‰å‚ç…§å…ƒ:
    - src/app/api/my/interview-questions/route.ts
    - src/app/api/my/interview/questions/route.ts
    çŠ¶æ…‹: âœ… æ¥ç¶šæ¸ˆã¿

â–  AIå¼•ç”¨/å¯è¦–åŒ–é–¢é€£
  - public.ai_citations_items / ai_citations_responses
    å‹å®šç¾©: ã‚ã‚Š
    ã‚³ãƒ¼ãƒ‰å‚ç…§: ç›´æ¥ã‚¯ã‚¨ãƒªãªã—
    çŠ¶æ…‹: âŒ æœªæ¥ç¶šï¼ˆDBå­˜åœ¨ã™ã‚‹ãŒã‚³ãƒ¼ãƒ‰å´ã§æœªä½¿ç”¨ï¼‰

  - public.v_ai_citations_aggregates (View)
    ã‚³ãƒ¼ãƒ‰å‚ç…§å…ƒ:
    - src/app/api/my/ai-citations/route.ts
    çŠ¶æ…‹: âœ… æ¥ç¶šæ¸ˆã¿

  - public.mv_ai_citations_org_period (Materialized View)
    ã‚³ãƒ¼ãƒ‰å‚ç…§å…ƒ:
    - src/app/api/my/ai-citations/route.ts
    çŠ¶æ…‹: âœ… æ¥ç¶šæ¸ˆã¿

  - public.ai_visibility_logs
    ã‚³ãƒ¼ãƒ‰å‚ç…§å…ƒ:
    - src/app/api/admin/ai-visibility/latest/route.ts
    - src/app/api/admin/ai-visibility/run/route.ts
    çŠ¶æ…‹: âœ… æ¥ç¶šæ¸ˆã¿

â–  ç¿»è¨³/åŸ‹ã‚è¾¼ã¿é–¢é€£
  - public.embeddings
    ã‚³ãƒ¼ãƒ‰å‚ç…§å…ƒ:
    - src/app/api/search/vector/route.ts
    çŠ¶æ…‹: âœ… æ¥ç¶šæ¸ˆã¿

  - public.embedding_jobs
    å‹å®šç¾©: ã‚ã‚Š
    ã‚³ãƒ¼ãƒ‰å‚ç…§: RPC enqueue_embedding_job çµŒç”±ã®ã¿
    çŠ¶æ…‹: âš ï¸ ç›´æ¥ã‚¯ã‚¨ãƒªãªã—

  - public.translation_jobs
    å‹å®šç¾©: ã‚ã‚Š
    ã‚³ãƒ¼ãƒ‰å‚ç…§: ç›´æ¥ã‚¯ã‚¨ãƒªãªã—
    çŠ¶æ…‹: âŒ æœªæ¥ç¶š

â–  ãƒ¬ãƒ¼ãƒˆåˆ¶å¾¡/ä¾µå…¥æ¤œçŸ¥é–¢é€£
  - public.rate_limit_configs / rate_limit_logs / rate_limit_requests / rate_limit_rules
    å‹å®šç¾©: ã‚ã‚Š
    ã‚³ãƒ¼ãƒ‰å‚ç…§: ç›´æ¥ã‚¯ã‚¨ãƒªãªã—ï¼ˆRPC check_rate_limit_db çµŒç”±ï¼‰
    çŠ¶æ…‹: âš ï¸ RPCçµŒç”±ã®ã¿

  - public.intrusion_detection_alerts / intrusion_detection_rules
    å‹å®šç¾©: ã‚ã‚Š
    ã‚³ãƒ¼ãƒ‰å‚ç…§: ç›´æ¥ã‚¯ã‚¨ãƒªãªã—
    çŠ¶æ…‹: âŒ æœªæ¥ç¶š

â–  å…¬é–‹ãƒ‘ãƒ–ãƒªãƒƒã‚·ãƒ¥é–¢é€£
  - public.public_*_tbl (posts, services, faqs, case_studies, products, news, organizations)
    å‹å®šç¾©: ã‚ã‚Š
    ã‚³ãƒ¼ãƒ‰å‚ç…§: RPC sync_public_*_tbl çµŒç”±
    çŠ¶æ…‹: âš ï¸ ç›´æ¥ã‚¢ã‚¯ã‚»ã‚¹ãªã—ã€ãƒˆãƒªã‚¬/RPCä¾å­˜

â–  ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸é–¢é€£
  ãƒã‚±ãƒƒãƒˆä½¿ç”¨:
  - assets: src/app/api/admin/upload-logo/route.ts
  - org-docs: src/app/api/my/org-docs/files/route.ts
  - (ãã®ä»–): management-console/settings/page.tsx
  çŠ¶æ…‹: âœ… éƒ¨åˆ†æ¥ç¶š

  - public.storage_access_logs
    å‹å®šç¾©: ã‚ã‚Š
    ã‚³ãƒ¼ãƒ‰å‚ç…§: ç›´æ¥ã‚¯ã‚¨ãƒªãªã—
    çŠ¶æ…‹: âŒ æœªæ¥ç¶š

â–  èª²é‡‘é–¢é€£
  - public.billing_checkout_links / billing_checkout_link_activations
    ã‚³ãƒ¼ãƒ‰å‚ç…§å…ƒ:
    - src/app/api/admin/billing-links/route.ts, [id]/activate/route.ts
    - src/app/api/public/active-checkout/route.ts
    çŠ¶æ…‹: âœ… æ¥ç¶šæ¸ˆã¿

  - public.stripe_customers / subscriptions / customers
    å‹å®šç¾©: ã‚ã‚Š
    ã‚³ãƒ¼ãƒ‰å‚ç…§: ç›´æ¥ã‚¯ã‚¨ãƒªãªã—
    çŠ¶æ…‹: âŒ æœªæ¥ç¶š

â–  RLSãƒ†ã‚¹ãƒˆé–¢é€£
  - public.rls_test_runs / rls_test_users / rls_test_scenarios / rls_test_results
    ã‚³ãƒ¼ãƒ‰å‚ç…§å…ƒ:
    - supabase/functions/rls-tester/index.ts
    çŠ¶æ…‹: âœ… Edge FunctionçµŒç”±ã§æ¥ç¶š

â–  ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ©/ã‚­ãƒ¥ãƒ¼é–¢é€£
  - public.cache_invalidation_queue
    å‹å®šç¾©: ã‚ã‚Š
    ã‚³ãƒ¼ãƒ‰å‚ç…§: RPC enqueue_cache_invalidation çµŒç”±
    çŠ¶æ…‹: âš ï¸ RPCä¾å­˜

  - public.content_refresh_queue
    ã‚³ãƒ¼ãƒ‰å‚ç…§å…ƒ:
    - supabase/functions/content-refresh-orchestrator/index.ts
    çŠ¶æ…‹: âœ… Edge Functionæ¥ç¶š

â–  ã‚µã‚¤ãƒˆ/é€šå ±é–¢é€£
  - public.ai_sites / ai_site_url_rules / ai_hreflang
    å‹å®šç¾©: ã‚ã‚Š
    ã‚³ãƒ¼ãƒ‰å‚ç…§: ç›´æ¥ã‚¯ã‚¨ãƒªãªã—
    çŠ¶æ…‹: âŒ æœªæ¥ç¶š

  - public.ip_reports / ip_report_actions / ip_blocklist / blocked_ips
    å‹å®šç¾©: ã‚ã‚Š
    ã‚³ãƒ¼ãƒ‰å‚ç…§: ç›´æ¥ã‚¯ã‚¨ãƒªãªã—ï¼ˆRPC auto_block_ip ç­‰çµŒç”±ï¼‰
    çŠ¶æ…‹: âš ï¸ RPCä¾å­˜

================================================================================
3. æœªæ¥ç¶š/æœªå®Ÿè£…ãƒªã‚¹ãƒˆï¼ˆé‡è¦ãƒ»è©³ç´°ï¼‰
================================================================================

--------------------------------------------------------------------------------
3.1 ã‚³ãƒ¼ãƒ‰ãŒå‘¼ã³å‡ºã—ã¦ã„ã‚‹ãŒDBã«å­˜åœ¨ã—ãªã„å¯èƒ½æ€§ãŒã‚ã‚‹ã‚‚ã®
--------------------------------------------------------------------------------

ã€RPCé–¢æ•°ã€‘

â–  get_plan_features (p_org_id)
  å‘¼ã³å‡ºã—å…ƒ: supabase/functions/reports-api/index.ts
  å‹å®šç¾©: src/types/rpc.ts (GetPlanFeaturesArgs, PlanFeaturesResult)
  Type Guard: isPlanFeaturesMap()
  çŠ¶æ…‹: âœ… å‹å®šç¾©ã‚ã‚Šã€å‘¼ã³å‡ºã—å®Ÿè£…æ¸ˆã¿ï¼ˆãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ä»˜ãï¼‰
  æˆ»ã‚Šå€¤: jsonb â†’ PlanFeaturesResult

â–  count_report_regenerations (p_org_id, p_period_start, p_period_end)
  å‘¼ã³å‡ºã—å…ƒ: supabase/functions/reports-api/index.ts
  å‹å®šç¾©: src/types/rpc.ts (CountReportRegenerationsArgs)
  çŠ¶æ…‹: âœ… å‹å®šç¾©ã‚ã‚Šã€å‘¼ã³å‡ºã—å®Ÿè£…æ¸ˆã¿ï¼ˆãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ä»˜ãï¼‰
  æˆ»ã‚Šå€¤: number

â–  increment_used_count (p_code)
  å‘¼ã³å‡ºã—å…ƒ: src/app/api/admin/org-groups/join-requests/[requestId]/route.ts
  å‹å®šç¾©: src/types/rpc.ts (IncrementUsedCountArgs)
  çŠ¶æ…‹: âœ… å‹å®šç¾©ã‚ã‚Šã€å‘¼ã³å‡ºã—å®Ÿè£…æ¸ˆã¿
  ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°: not_found, expired, max_uses_reached ã®3ãƒ‘ã‚¿ãƒ¼ãƒ³å¯¾å¿œ
  æˆ»ã‚Šå€¤: void (ã‚¨ãƒ©ãƒ¼æ™‚ã¯ä¾‹å¤–)

â–  log_service_role_action (p_job_name, p_request_id, p_expected_row_count, p_affected_row_count, p_error_code, p_meta)
  å‘¼ã³å‡ºã—å…ƒ: supabase/functions/content-refresh-orchestrator/index.ts:444
  çŠ¶æ…‹: âœ… DBç¢ºèªæ¸ˆã¿ï¼ˆ2024-12-23ï¼‰
  å®šç¾©: å¼•æ•° (text, text, integer, integer, text, jsonb)ã€æˆ»ã‚Šå€¤ void

â–  increment_org_interview_stats (...)
  å‘¼ã³å‡ºã—å…ƒ: supabase/functions/ai-interview-finalize/index.ts:91
  çŠ¶æ…‹: ğŸ”´ DBæœªå®Ÿè£…ï¼ˆ2024-12-23ç¢ºèªï¼‰
  å¯¾å¿œ: ã€è¦ä½œæˆã€‘organization_ai_usage ã®çµ±è¨ˆã‚¤ãƒ³ã‚¯ãƒªãƒ¡ãƒ³ãƒˆé–¢æ•°

â–  get_database_stats ()
  å‘¼ã³å‡ºã—å…ƒ: src/lib/monitoring/production-monitoring.ts:485
  çŠ¶æ…‹: âœ… DBç¢ºèªæ¸ˆã¿ï¼ˆ2024-12-23ï¼‰
  å®šç¾©: å¼•æ•°ãªã—ã€æˆ»ã‚Šå€¤ jsonb

â–  auto_block_ip (target_ip, block_reason, block_duration_minutes)
  å‘¼ã³å‡ºã—å…ƒ: RPCçµŒç”±ï¼ˆip_reports/ip_blocklisté–¢é€£ï¼‰
  çŠ¶æ…‹: âœ… DBç¢ºèªæ¸ˆã¿ï¼ˆ2024-12-23ï¼‰
  å®šç¾©: å¼•æ•° (inet, text, integer)ã€æˆ»ã‚Šå€¤ uuid
  æ³¨æ„: âš ï¸ æˆ»ã‚Šå€¤ã¯ uuidï¼ˆvoid ã§ã¯ãªã„ï¼‰ã€‚ãƒ–ãƒ­ãƒƒã‚¯è¨˜éŒ²ã®IDã‚’è¿”å´

â–  check_rate_limit_db (limit_key, window_seconds, max_requests)
  å‘¼ã³å‡ºã—å…ƒ: RPCçµŒç”±ï¼ˆãƒ¬ãƒ¼ãƒˆåˆ¶é™é–¢é€£ï¼‰
  çŠ¶æ…‹: âœ… DBç¢ºèªæ¸ˆã¿ï¼ˆ2024-12-23ï¼‰
  å®šç¾©: å¼•æ•° (text, integer, integer)ã€æˆ»ã‚Šå€¤ jsonb

â–  enqueue_embedding_job (p_org_id, p_source_table, p_source_id, p_source_field, p_content_text, p_chunk_strategy, p_embedding_model, p_priority)
  å‘¼ã³å‡ºã—å…ƒ: RPCçµŒç”±ï¼ˆåŸ‹ã‚è¾¼ã¿ã‚¸ãƒ§ãƒ–é–¢é€£ï¼‰
  çŠ¶æ…‹: âœ… DBç¢ºèªæ¸ˆã¿ï¼ˆ2024-12-23ï¼‰
  å®šç¾©: å¼•æ•° (uuid, text, uuid, text, text, text, text, smallint)ã€æˆ»ã‚Šå€¤ uuid

â–  enqueue_cache_invalidation (_path, _source_id) / (p_scope, p_path, p_org_id, p_lang, p_source_table, p_source_id)
  å‘¼ã³å‡ºã—å…ƒ: RPCçµŒç”±ï¼ˆã‚­ãƒ£ãƒƒã‚·ãƒ¥ç„¡åŠ¹åŒ–é–¢é€£ï¼‰
  çŠ¶æ…‹: âœ… DBç¢ºèªæ¸ˆã¿ï¼ˆ2024-12-23ï¼‰
  å®šç¾©: 2ã¤ã®ã‚ªãƒ¼ãƒãƒ¼ãƒ­ãƒ¼ãƒ‰ã‚ã‚Šã€ã„ãšã‚Œã‚‚æˆ»ã‚Šå€¤ void

â–  fn_build_monthly_kpis (p_org_id, p_period_start, p_period_end)
  å‘¼ã³å‡ºã—å…ƒ: supabase/functions/monthly-report-generate/index.ts
  å‹å®šç¾©: src/types/rpc.ts (FnBuildMonthlyKpisArgs, MonthlyKpisResult)
  Type Guard: isMonthlyKpis()
  çŠ¶æ…‹: âš ï¸ DBç¢ºèªæ¸ˆã¿ï¼ˆ2024-12-23ï¼‰- é‡è¤‡å•é¡Œã‚ã‚Š
  å®šç¾©: å¼•æ•° (uuid, date, date)ã€æˆ»ã‚Šå€¤ jsonb
  å•é¡Œ: public.fn_build_monthly_kpis ã¨ analytics.fn_build_monthly_kpis ãŒé‡è¤‡
  å¯¾å¿œ: ã€è¦çµ±ä¸€ã€‘ã©ã¡ã‚‰ã‚’æ­£å¼ç‰ˆã«ã™ã‚‹ã‹æ±ºå®šã—ã€ç‰‡æ–¹ã‚’å‰Šé™¤

ã€ãƒ†ãƒ¼ãƒ–ãƒ«/ãƒ“ãƒ¥ãƒ¼ã€‘

â–  view_ai_starter_caps_current
  å‘¼ã³å‡ºã—å…ƒ: supabase/functions/monthly-reports/index.ts:27
  çŠ¶æ…‹: âœ… DBç¢ºèªæ¸ˆã¿ï¼ˆ2024-12-23ï¼‰
  ã‚«ãƒ©ãƒ : organization_id uuid, monthly_limit integer, used_count integer, remaining integer

â–  view_report_regen_limit_current
  å‘¼ã³å‡ºã—å…ƒ: supabase/functions/monthly-reports/index.ts:46
  çŠ¶æ…‹: âœ… DBç¢ºèªæ¸ˆã¿ï¼ˆ2024-12-23ï¼‰
  ã‚«ãƒ©ãƒ : organization_id uuid, monthly_limit integer, used_count bigint, remaining bigint

â–  view_org_plans
  å‘¼ã³å‡ºã—å…ƒ: supabase/functions/monthly-reports/index.ts
  å‹å®šç¾©: src/types/rpc.ts (ViewOrgPlansRow)
  Type Guard: isViewOrgPlansRow()
  çŠ¶æ…‹: âœ… å‹å®šç¾©ã‚ã‚Š
  ã‚«ãƒ©ãƒ : organization_id, plan_id, features (jsonb)

â–  ai_interviews (ãƒ¬ã‚¬ã‚·ãƒ¼)
  å‘¼ã³å‡ºã—å…ƒ:
  - src/app/api/interview/finalize/route.ts:306
  - supabase/functions/example-finalize/index.ts:313, 355
  çŠ¶æ…‹: âœ… DBç¢ºèªæ¸ˆã¿ï¼ˆ2024-12-23ï¼‰- ç§»è¡Œå®Œäº†
  çµæœ: ai_interviews ã¯å­˜åœ¨ã—ãªã„ã€‚ai_interview_sessions ã«å®Œå…¨ç§»è¡Œæ¸ˆã¿
  å¯¾å¿œ: ã‚³ãƒ¼ãƒ‰å´ã®å‚ç…§ã‚’ ai_interview_sessions ã«ä¿®æ­£ã™ã‚‹å¿…è¦ã‚ã‚Š

â–  reports (ãƒ¬ã‚¬ã‚·ãƒ¼)
  å‘¼ã³å‡ºã—å…ƒ: src/app/api/public/reports/route.ts:166
  çŠ¶æ…‹: âœ… DBç¢ºèªæ¸ˆã¿ï¼ˆ2024-12-23ï¼‰
  çµæœ: reports ã¯å­˜åœ¨ã—ãªã„ã€‚monthly_reports_legacy ãŒãƒ¬ã‚¬ã‚·ãƒ¼ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—
        ai_monthly_reports ãŒç¾è¡Œãƒ†ãƒ¼ãƒ–ãƒ«
  å¯¾å¿œ: ã‚³ãƒ¼ãƒ‰å´ã®å‚ç…§ã‚’ ai_monthly_reports ã«ä¿®æ­£ã™ã‚‹å¿…è¦ã‚ã‚Š

â–  user_organizations (ãƒ“ãƒ¥ãƒ¼)
  å‘¼ã³å‡ºã—å…ƒ:
  - src/app/monitor/page.tsx
  - src/app/test/realtime/page.tsx
  - src/app/test/admin-api/page.tsx
  - src/app/dashboard/settings/page.tsx
  - src/app/dashboard/admin/contents/page.tsx
  - src/app/dashboard/case-studies/page.tsx
  - src/app/dashboard/org-ai-chat/page.tsx
  - src/app/api/admin/upload-logo/route.ts
  - src/app/api/admin/cms/*/route.ts
  - src/lib/ai/group-context.ts
  å‹å®šç¾©: src/types/rpc.ts (UserOrganizationRow)
  Type Guard: isUserOrganizationRow()
  çŠ¶æ…‹: âœ… å‹å®šç¾©ã‚ã‚Š
  ã‚«ãƒ©ãƒ : user_id, organization_id, role, name, slug, plan_id, feature_flags,
          entitlements, is_published, org_created_at

â–  organization_groups
  å‘¼ã³å‡ºã—å…ƒ: src/app/api/admin/org-groups/*/route.ts (å¤šæ•°)
  çŠ¶æ…‹: ğŸ”´ DBç¢ºèªæ¸ˆã¿ï¼ˆ2024-12-23ï¼‰- å­˜åœ¨ã—ãªã„
  å¯¾å¿œ: å¿…è¦ã§ã‚ã‚Œã°ãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆã€ä¸è¦ã§ã‚ã‚Œã°ã‚³ãƒ¼ãƒ‰å´ã®å‚ç…§ã‚’å‰Šé™¤

â–  qna_stats
  å‘¼ã³å‡ºã—å…ƒ:
  - src/app/api/admin/qna-stats/route.ts
  - src/app/api/my/qna-stats/route.ts
  - src/app/api/qna/stats/route.ts
  çŠ¶æ…‹: ğŸ”´ DBç¢ºèªæ¸ˆã¿ï¼ˆ2024-12-23ï¼‰- å­˜åœ¨ã—ãªã„
  å‚™è€ƒ: qna_events ãƒ†ãƒ¼ãƒ–ãƒ«ã¯å­˜åœ¨
  å¯¾å¿œ: qna_events ã‹ã‚‰é›†è¨ˆã™ã‚‹ã‹ã€qna_stats ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’ä½œæˆ

â–  sales_materials_stats
  å‘¼ã³å‡ºã—å…ƒ:
  - src/app/api/materials/stats/route.ts
  - src/app/api/admin/material-stats/route.ts
  - src/app/api/admin/material-stats/export/route.ts
  çŠ¶æ…‹: âœ… å‹å®šç¾©ã‚ã‚Š

â–  violations
  å‘¼ã³å‡ºã—å…ƒ: src/app/api/enforcement/users/[id]/status/route.ts:78
  çŠ¶æ…‹: âœ… DBç¢ºèªæ¸ˆã¿ï¼ˆ2024-12-23ï¼‰- å­˜åœ¨ã™ã‚‹

â–  user_violation_stats
  å‘¼ã³å‡ºã—å…ƒ: src/app/api/enforcement/users/[id]/status/route.ts:78
  çŠ¶æ…‹: ğŸ”´ DBç¢ºèªæ¸ˆã¿ï¼ˆ2024-12-23ï¼‰- å­˜åœ¨ã—ãªã„
  å¯¾å¿œ: å¿…è¦ãªã‚‰é›†è¨ˆãƒ“ãƒ¥ãƒ¼/ãƒ†ãƒ¼ãƒ–ãƒ«ã¨ã—ã¦å®šç¾©

â–  analytics
  å‘¼ã³å‡ºã—å…ƒ: src/app/api/dashboard/stats/route.ts:159
  çŠ¶æ…‹: âš ï¸ DBç¢ºèªæ¸ˆã¿ï¼ˆ2024-12-23ï¼‰
  çµæœ: analytics ã‚¹ã‚­ãƒ¼ãƒã«é›†è¨ˆãƒ“ãƒ¥ãƒ¼ç¾¤ã¯å­˜åœ¨ã€publicã«analyticsãƒ†ãƒ¼ãƒ–ãƒ«ã¯ãªã—
  å¯¾å¿œ: è¦ä»¶ã«å¿œã˜ã¦ãƒ†ãƒ¼ãƒ–ãƒ«ã‹ãƒ“ãƒ¥ãƒ¼ã‹ã‚’å®šç¾©

â–  news
  å‘¼ã³å‡ºã—å…ƒ: src/app/api/admin/news/page.tsx (ã‚³ãƒ¡ãƒ³ãƒˆã‚¢ã‚¦ãƒˆ)
  çŠ¶æ…‹: âœ… å‹å®šç¾©ã‚ã‚Šã€ã‚³ãƒ¼ãƒ‰å´æœªä½¿ç”¨

â–  ai_citation_kpis_daily
  å‘¼ã³å‡ºã—å…ƒ: supabase/functions/reports/index.ts:169
  çŠ¶æ…‹: ğŸ”´ DBç¢ºèªæ¸ˆã¿ï¼ˆ2024-12-23ï¼‰- å­˜åœ¨ã—ãªã„
  å¯¾å¿œ: å¿…è¦ãªã‚‰é›†è¨ˆãƒãƒ†ãƒ“ãƒ¥ãƒ¼orãƒ†ãƒ¼ãƒ–ãƒ«ã‚’è¨­è¨ˆ

â–  ai_citation_integrity_daily
  å‘¼ã³å‡ºã—å…ƒ: supabase/functions/reports/index.ts:197
  çŠ¶æ…‹: ğŸ”´ DBç¢ºèªæ¸ˆã¿ï¼ˆ2024-12-23ï¼‰- å­˜åœ¨ã—ãªã„
  å¯¾å¿œ: å¿…è¦ãªã‚‰é›†è¨ˆãƒãƒ†ãƒ“ãƒ¥ãƒ¼orãƒ†ãƒ¼ãƒ–ãƒ«ã‚’è¨­è¨ˆ

â–  site_settings
  å‘¼ã³å‡ºã—å…ƒ: src/app/api/ops/site-settings/route.ts
  çŠ¶æ…‹: âš ï¸ DBç¢ºèªæ¸ˆã¿ï¼ˆ2024-12-23ï¼‰- å­˜åœ¨ã—ãªã„
  å‚™è€ƒ: cms_site_settings ãŒä»£æ›¿ã¨ã—ã¦å­˜åœ¨
  å¯¾å¿œ: ç¾è¡ŒãŒcms_site_settingsã§å•é¡Œãªã‘ã‚Œã°OKã€åˆ¥ç”¨é€”ãªã‚‰ä½œæˆ

â–  site_admins
  å‘¼ã³å‡ºã—å…ƒ: supabase/functions/reports/index.ts:152
  çŠ¶æ…‹: âœ… DBç¢ºèªæ¸ˆã¿ï¼ˆ2024-12-23ï¼‰- å­˜åœ¨ã™ã‚‹

--------------------------------------------------------------------------------
3.2 DBã«å­˜åœ¨ã™ã‚‹ãŒã‚³ãƒ¼ãƒ‰ã‹ã‚‰æœªæ¥ç¶šã®ãƒ†ãƒ¼ãƒ–ãƒ«
--------------------------------------------------------------------------------

ã€å®Œå…¨æœªæ¥ç¶šã€‘
- ai_answers: å‹å®šç¾©ã‚ã‚Šã€ã‚³ãƒ¼ãƒ‰æ¥ç¶šãªã—
- ai_bot_logs: å‹å®šç¾©ã‚ã‚Šã€ç›´æ¥ã‚¯ã‚¨ãƒªãªã—
- ai_chunks: å‹å®šç¾©ã‚ã‚Šã€ã‚³ãƒ¼ãƒ‰æ¥ç¶šãªã—
- ai_content_units: å‹å®šç¾©ã‚ã‚Šã€ã‚³ãƒ¼ãƒ‰æ¥ç¶šãªã—
- ai_conversations: å‹å®šç¾©ã‚ã‚Šã€ã‚³ãƒ¼ãƒ‰æ¥ç¶šãªã—
- ai_disclosure_documents: å‹å®šç¾©ã‚ã‚Šã€ã‚³ãƒ¼ãƒ‰æ¥ç¶šãªã—
- ai_exports: å‹å®šç¾©ã‚ã‚Šã€ã‚³ãƒ¼ãƒ‰æ¥ç¶šãªã—
- ai_feedback: å‹å®šç¾©ã‚ã‚Šã€ã‚³ãƒ¼ãƒ‰æ¥ç¶šãªã—
- ai_generated_drafts: å‹å®šç¾©ã‚ã‚Šã€ã‚³ãƒ¼ãƒ‰æ¥ç¶šãªã—
- ai_jsonld_versions: å‹å®šç¾©ã‚ã‚Šã€ã‚³ãƒ¼ãƒ‰æ¥ç¶šãªã—
- ai_manifest_settings: å‹å®šç¾©ã‚ã‚Šã€ã‚³ãƒ¼ãƒ‰æ¥ç¶šãªã—ï¼ˆRPCçµŒç”±ï¼Ÿï¼‰
- ai_messages: å‹å®šç¾©ã‚ã‚Šã€ã‚³ãƒ¼ãƒ‰æ¥ç¶šãªã—
- ai_queries: å‹å®šç¾©ã‚ã‚Šã€ã‚³ãƒ¼ãƒ‰æ¥ç¶šãªã—
- ai_retrievals: å‹å®šç¾©ã‚ã‚Šã€ã‚³ãƒ¼ãƒ‰æ¥ç¶šãªã—
- ai_sections: å‹å®šç¾©ã‚ã‚Šã€ã‚³ãƒ¼ãƒ‰æ¥ç¶šãªã—
- ai_sources: å‹å®šç¾©ã‚ã‚Šã€ã‚³ãƒ¼ãƒ‰æ¥ç¶šãªã—
- ai_usage_events: Edge FunctionçµŒç”±ã®ã¿
- ai_visibility_config: å‹å®šç¾©ã‚ã‚Šã€ã‚³ãƒ¼ãƒ‰æ¥ç¶šãªã—
- ai_visibility_scores: å‹å®šç¾©ã‚ã‚Šã€ã‚³ãƒ¼ãƒ‰æ¥ç¶šãªã—
- alert_events: å‹å®šç¾©ã‚ã‚Šã€ã‚³ãƒ¼ãƒ‰æ¥ç¶šãªã—
- alert_source_allowlist: å‹å®šç¾©ã‚ã‚Šã€ã‚³ãƒ¼ãƒ‰æ¥ç¶šãªã—
- alert_sources: å‹å®šç¾©ã‚ã‚Šã€ã‚³ãƒ¼ãƒ‰æ¥ç¶šãªã—
- alert_thresholds: å‹å®šç¾©ã‚ã‚Šã€ã‚³ãƒ¼ãƒ‰æ¥ç¶šãªã—
- analytics_events: å‹å®šç¾©ã‚ã‚Šã€ã‚³ãƒ¼ãƒ‰æ¥ç¶šãªã—ï¼ˆãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³ï¼‰
- chatbot_interactions: å‹å®šç¾©ã‚ã‚Šã€ã‚³ãƒ¼ãƒ‰æ¥ç¶šãªã—
- chatbots: å‹å®šç¾©ã‚ã‚Šã€ã‚³ãƒ¼ãƒ‰æ¥ç¶šãªã—
- comments: å‹å®šç¾©ã‚ã‚Šã€ã‚³ãƒ¼ãƒ‰æ¥ç¶šãªã—
- contract_violations: Edge FunctionçµŒç”±ã®ã¿
- crawler_policies: å‹å®šç¾©ã‚ã‚Šã€ã‚³ãƒ¼ãƒ‰æ¥ç¶šãªã—
- customers: å‹å®šç¾©ã‚ã‚Šã€ã‚³ãƒ¼ãƒ‰æ¥ç¶šãªã—
- design_versions: å‹å®šç¾©ã‚ã‚Šã€ã‚³ãƒ¼ãƒ‰æ¥ç¶šãªã—
- designs: å‹å®šç¾©ã‚ã‚Šã€ã‚³ãƒ¼ãƒ‰æ¥ç¶šãªã—
- enforcement_audit: å‹å®šç¾©ã‚ã‚Šã€ã‚³ãƒ¼ãƒ‰æ¥ç¶šãªã—
- intrusion_detection_alerts: å‹å®šç¾©ã‚ã‚Šã€ã‚³ãƒ¼ãƒ‰æ¥ç¶šãªã—
- intrusion_detection_rules: å‹å®šç¾©ã‚ã‚Šã€ã‚³ãƒ¼ãƒ‰æ¥ç¶šãªã—
- ip_blocklist: å‹å®šç¾©ã‚ã‚Šã€ã‚³ãƒ¼ãƒ‰æ¥ç¶šãªã—
- ip_report_actions: å‹å®šç¾©ã‚ã‚Šã€ã‚³ãƒ¼ãƒ‰æ¥ç¶šãªã—
- ip_reports: å‹å®šç¾©ã‚ã‚Šã€ã‚³ãƒ¼ãƒ‰æ¥ç¶šãªã—
- job_runs: å‹å®šç¾©ã‚ã‚Šã€ã‚³ãƒ¼ãƒ‰æ¥ç¶šãªã—ï¼ˆjob_runs_v2 ä½¿ç”¨ï¼‰
- monthly_report_sections: å‹å®šç¾©ã‚ã‚Šã€ã‚³ãƒ¼ãƒ‰æ¥ç¶šãªã—
- monthly_reports_legacy: å‹å®šç¾©ã‚ã‚Šã€ã‚³ãƒ¼ãƒ‰æ¥ç¶šãªã—
- news_translations: å‹å®šç¾©ã‚ã‚Šã€ã‚³ãƒ¼ãƒ‰æ¥ç¶šãªã—
- object_prefixes: å‹å®šç¾©ã‚ã‚Šã€ã‚³ãƒ¼ãƒ‰æ¥ç¶šãªã—
- ops_audit: å‹å®šç¾©ã‚ã‚Šã€ã‚³ãƒ¼ãƒ‰æ¥ç¶šãªã—
- order_items: å‹å®šç¾©ã‚ã‚Šã€ã‚³ãƒ¼ãƒ‰æ¥ç¶šãªã—
- orders: å‹å®šç¾©ã‚ã‚Šã€ã‚³ãƒ¼ãƒ‰æ¥ç¶šãªã—
- org_memberships: å‹å®šç¾©ã‚ã‚Šã€ã‚³ãƒ¼ãƒ‰æ¥ç¶šãªã—
- org_roles: å‹å®šç¾©ã‚ã‚Šã€ã‚³ãƒ¼ãƒ‰æ¥ç¶šãªã—
- organization_addons: å‹å®šç¾©ã‚ã‚Šã€ã‚³ãƒ¼ãƒ‰æ¥ç¶šãªã—
- organization_ai_usage: å‹å®šç¾©ã‚ã‚Šã€ã‚³ãƒ¼ãƒ‰æ¥ç¶šãªã—
- organization_verifications: å‹å®šç¾©ã‚ã‚Šã€ã‚³ãƒ¼ãƒ‰æ¥ç¶šãªã—
- partners: å‹å®šç¾©ã‚ã‚Šã€ã‚³ãƒ¼ãƒ‰æ¥ç¶šãªã—
- projects: å‹å®šç¾©ã‚ã‚Šã€ã‚³ãƒ¼ãƒ‰æ¥ç¶šãªã—
- qa_question_templates: å‹å®šç¾©ã‚ã‚Šã€ã‚³ãƒ¼ãƒ‰æ¥ç¶šãªã—
- rate_limit_configs: å‹å®šç¾©ã‚ã‚Šã€RPCçµŒç”±ã®ã¿
- rate_limit_logs: å‹å®šç¾©ã‚ã‚Šã€RPCçµŒç”±ã®ã¿
- rate_limit_requests: å‹å®šç¾©ã‚ã‚Šã€RPCçµŒç”±ã®ã¿
- rate_limit_rules: å‹å®šç¾©ã‚ã‚Šã€RPCçµŒç”±ã®ã¿
- review_queue: å‹å®šç¾©ã‚ã‚Šã€ã‚³ãƒ¼ãƒ‰æ¥ç¶šãªã—
- rls_denied_events: Edge FunctionçµŒç”±ã®ã¿
- role_change_audit: å‹å®šç¾©ã‚ã‚Šã€ã‚³ãƒ¼ãƒ‰æ¥ç¶šãªã—
- room_members: å‹å®šç¾©ã‚ã‚Šã€ã‚³ãƒ¼ãƒ‰æ¥ç¶šãªã—
- rooms: å‹å®šç¾©ã‚ã‚Šã€ã‚³ãƒ¼ãƒ‰æ¥ç¶šãªã—
- security_incidents: å‹å®šç¾©ã‚ã‚Šã€ã‚³ãƒ¼ãƒ‰æ¥ç¶šãªã—ï¼ˆãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³ï¼‰
- sensitive_data_patterns: å‹å®šç¾©ã‚ã‚Šã€ã‚³ãƒ¼ãƒ‰æ¥ç¶šãªã—
- storage_access_logs: å‹å®šç¾©ã‚ã‚Šã€ã‚³ãƒ¼ãƒ‰æ¥ç¶šãªã—
- stripe_customers: å‹å®šç¾©ã‚ã‚Šã€ã‚³ãƒ¼ãƒ‰æ¥ç¶šãªã—
- subscriptions: å‹å®šç¾©ã‚ã‚Šã€ã‚³ãƒ¼ãƒ‰æ¥ç¶šãªã—
- supported_languages: å‹å®šç¾©ã‚ã‚Šã€ã‚³ãƒ¼ãƒ‰æ¥ç¶šãªã—
- tasks: å‹å®šç¾©ã‚ã‚Šã€ã‚³ãƒ¼ãƒ‰æ¥ç¶šãªã—
- tenants: å‹å®šç¾©ã‚ã‚Šã€ã‚³ãƒ¼ãƒ‰æ¥ç¶šãªã—
- translation_jobs: å‹å®šç¾©ã‚ã‚Šã€ã‚³ãƒ¼ãƒ‰æ¥ç¶šãªã—
- user_favorites: å‹å®šç¾©ã‚ã‚Šã€ã‚³ãƒ¼ãƒ‰æ¥ç¶šãªã—
- user_profiles: å‹å®šç¾©ã‚ã‚Šã€ã‚³ãƒ¼ãƒ‰æ¥ç¶šãªã—
- user_saved_searches: å‹å®šç¾©ã‚ã‚Šã€ã‚³ãƒ¼ãƒ‰æ¥ç¶šãªã—

================================================================================
4. å„ªå…ˆåº¦ä»˜ãã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒ—ãƒ©ãƒ³ï¼ˆ90æ—¥ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—ï¼‰
================================================================================

--------------------------------------------------------------------------------
ãƒ•ã‚§ãƒ¼ã‚º1ï¼ˆ2é€±é–“ï¼‰ï¼šæ—¢å­˜Mediumé ˜åŸŸã®çµç·šå¼·åŒ–
--------------------------------------------------------------------------------

ã€Week 1ã€‘
â–¡ products / product_translations ã®æ¥ç¶š
  - src/app/api/my/products/route.ts ä½œæˆ
  - src/app/api/public/products/route.ts ä½œæˆ
  - RLS ãƒãƒªã‚·ãƒ¼ç¢ºèª

âœ… ä¸è¶³RPCé–¢æ•°ã®å‹å®šç¾©ä½œæˆï¼ˆ2024-12-23å®Œäº†ï¼‰
  - get_plan_features(p_org_id) â†’ src/types/rpc.ts
  - count_report_regenerations(p_org_id, p_period_start, p_period_end) â†’ src/types/rpc.ts
  - increment_used_count(p_code) â†’ src/types/rpc.ts
  - fn_build_monthly_kpis(p_org_id, p_period_start, p_period_end) â†’ src/types/rpc.ts
  âš ï¸ æ®‹ã‚¿ã‚¹ã‚¯: DBã«é–¢æ•°ãŒå­˜åœ¨ã™ã‚‹ã“ã¨ã®ç¢ºèª

âœ… Viewå‹å®šç¾©ä½œæˆï¼ˆ2024-12-23å®Œäº†ï¼‰
  - user_organizations â†’ src/types/rpc.ts (UserOrganizationRow)
  - view_org_plans â†’ src/types/rpc.ts (ViewOrgPlansRow)
  âš ï¸ æ®‹ã‚¿ã‚¹ã‚¯: DBã«ãƒ“ãƒ¥ãƒ¼ãŒå­˜åœ¨ã™ã‚‹ã“ã¨ã®ç¢ºèª

â–¡ ãƒ¬ã‚¬ã‚·ãƒ¼ãƒ†ãƒ¼ãƒ–ãƒ«/ãƒ“ãƒ¥ãƒ¼ç¢ºèª
  - reports vs ai_monthly_reports æ•´ç†
  - ai_interviews vs ai_interview_sessions æ•´ç†

âœ… Realtimeå®šæ•°é›†ä¸­ç®¡ç†ï¼ˆ2024-12-23å®Œäº†ï¼‰
  - src/lib/realtime/constants.ts ä½œæˆ
  - CHANNEL_TOPICS, BROADCAST_EVENTS, CHANNEL_CONFIG, RECONNECT_CONFIG
  - ç’°å¢ƒå¤‰æ•°ã«ã‚ˆã‚‹æ©Ÿèƒ½ãƒ•ãƒ©ã‚°å¯¾å¿œ
  - setAuth() å¯¾å¿œï¼ˆprivate ãƒãƒ£ãƒ³ãƒãƒ«èªå¯ï¼‰

ã€Week 2ã€‘
â–¡ ç¿»è¨³ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³æ¥ç¶š
  - translation_jobs ç›£è¦–UIè¿½åŠ 
  - embedding_jobs ç›£è¦–UIè¿½åŠ 
  - src/app/dashboard/jobs/ ãƒšãƒ¼ã‚¸ä½œæˆ

â–¡ ç›£æŸ»é€£æºå¼·åŒ–
  - service_role_audit ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰
  - ops_audit_simple çµ±åˆ

âœ… Q&A Stats æŠ½è±¡åŒ–ãƒ¬ã‚¤ãƒ¤ãƒ¼ï¼ˆ2024-12-23å®Œäº†ï¼‰
  - src/lib/qna-stats/service.ts ä½œæˆ
  - src/lib/qna-stats/index.ts ä½œæˆ
  - å°†æ¥ã® qna_stats ãƒ†ãƒ¼ãƒ–ãƒ«ç§»è¡Œã«å‚™ãˆãŸæŠ½è±¡åŒ–

--------------------------------------------------------------------------------
ãƒ•ã‚§ãƒ¼ã‚º2ï¼ˆ4é€±é–“ï¼‰ï¼šAIã‚¤ãƒ³ã‚¿ãƒ“ãƒ¥ãƒ¼/å¼•ç”¨ã®MVPæ¥ç¶š
--------------------------------------------------------------------------------

ã€Week 3-4ã€‘
â–¡ ai_interview_messages ç›´æ¥æ¥ç¶š
  - src/app/api/my/interview/sessions/[id]/messages/route.ts
  - Realtime è³¼èª­è¿½åŠ 

â–¡ ai_citations_items / ai_citations_responses æ¥ç¶š
  - src/lib/ai/citations.ts å®Ÿè£…å®Œäº†
  - src/app/dashboard/ai-citations/ å¼·åŒ–

ã€Week 5-6ã€‘
â–¡ AIå¯è¦–åŒ–ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰
  - ai_visibility_scores è¡¨ç¤º
  - ai_bot_logs é›†è¨ˆè¡¨ç¤º

â–¡ usageè¨ˆæ¸¬å¼·åŒ–
  - ai_usage_events UIã‹ã‚‰ã®å¯è¦–åŒ–
  - organization_ai_usage ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰

--------------------------------------------------------------------------------
ãƒ•ã‚§ãƒ¼ã‚º3ï¼ˆ4é€±é–“ï¼‰ï¼šãƒ¬ãƒ¼ãƒˆåˆ¶å¾¡/ä¾µå…¥æ¤œçŸ¥/é‹ç”¨å®Ÿè£…
--------------------------------------------------------------------------------

ã€Week 7-8ã€‘
â–¡ ãƒ¬ãƒ¼ãƒˆåˆ¶å¾¡UI
  - rate_limit_configs ç®¡ç†ç”»é¢
  - rate_limit_logs ç›£è¦–ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰

â–¡ ä¾µå…¥æ¤œçŸ¥UI
  - intrusion_detection_alerts ä¸€è¦§
  - intrusion_detection_rules ç®¡ç†

ã€Week 9-10ã€‘
â–¡ é€šå ±/ãƒ–ãƒ­ãƒƒã‚¯UI
  - ip_reports ç®¡ç†
  - ip_blocklist ç®¡ç†
  - blocked_ips ç¢ºèª

â–¡ ã‚µã‚¤ãƒˆè¨­å®šUI
  - ai_sites ç®¡ç†
  - ai_site_url_rules ç®¡ç†
  - ai_hreflang ç®¡ç†

================================================================================
5. ä»˜éŒ²
================================================================================

--------------------------------------------------------------------------------
5.1 æŠ½å‡ºæ­£è¦è¡¨ç¾ãƒ†ãƒ³ãƒ—ãƒ¬ï¼ˆgrepç”¨ï¼‰
--------------------------------------------------------------------------------

# ãƒ†ãƒ¼ãƒ–ãƒ«å‚ç…§
grep -rE "\.from\(['\"]([a-z_]+)['\"]\)" src/ --include="*.ts" --include="*.tsx"

# RPCå‘¼ã³å‡ºã—
grep -rE "\.rpc\(['\"]([a-z_]+)['\"]" src/ --include="*.ts" --include="*.tsx"

# Realtimeãƒãƒ£ãƒ³ãƒãƒ«
grep -rE "\.channel\(['\"]" src/ --include="*.ts" --include="*.tsx"

# ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸
grep -rE "storage\.from\(['\"]" src/ --include="*.ts" --include="*.tsx"

--------------------------------------------------------------------------------
5.2 RLSãƒ†ã‚¹ãƒˆã‚·ãƒŠãƒªã‚ªé››å½¢
--------------------------------------------------------------------------------

GIVEN: æœªèªè¨¼ãƒ¦ãƒ¼ã‚¶ãƒ¼ (anon)
WHEN: SELECT * FROM ai_monthly_reports
THEN: 0ä»¶è¿”å´

GIVEN: èªè¨¼æ¸ˆã¿ã€çµ„ç¹”ãƒ¡ãƒ³ãƒãƒ¼ã§ãªã„
WHEN: SELECT * FROM ai_monthly_reports WHERE organization_id = 'xxx'
THEN: 0ä»¶è¿”å´

GIVEN: èªè¨¼æ¸ˆã¿ã€çµ„ç¹”ãƒ¡ãƒ³ãƒãƒ¼ (viewer)
WHEN: SELECT * FROM ai_monthly_reports WHERE organization_id = 'xxx'
THEN: è‡ªçµ„ç¹”ã®ãƒ¬ãƒãƒ¼ãƒˆã®ã¿è¿”å´

GIVEN: èªè¨¼æ¸ˆã¿ã€çµ„ç¹”ãƒ¡ãƒ³ãƒãƒ¼ (admin)
WHEN: UPDATE ai_monthly_reports SET status = 'completed'
THEN: è‡ªçµ„ç¹”ã®ãƒ¬ãƒãƒ¼ãƒˆã®ã¿æ›´æ–°å¯èƒ½

--------------------------------------------------------------------------------
5.3 Realtimeå®Ÿè£…æŒ‡é‡ï¼ˆ2024-12-23æ›´æ–°ï¼‰
--------------------------------------------------------------------------------

å®šæ•°ç®¡ç†: src/lib/realtime/constants.ts
- CHANNEL_TOPICS: ãƒˆãƒ”ãƒƒã‚¯ç”Ÿæˆé–¢æ•°
- BROADCAST_EVENTS: ã‚¤ãƒ™ãƒ³ãƒˆåå®šæ•°
- CHANNEL_CONFIG: ãƒãƒ£ãƒ³ãƒãƒ«è¨­å®šãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ
- RECONNECT_CONFIG: å†æ¥ç¶šè¨­å®š
- REALTIME_TABLES: Realtimeå¯¾è±¡ãƒ†ãƒ¼ãƒ–ãƒ«å

æ¨å¥¨è¨­å®š:
```typescript
import { CHANNEL_CONFIG, calculateBackoffDelay } from '@/lib/realtime/constants';

// setAuth ã‚’ subscribe å‰ã«å®Ÿè¡Œï¼ˆprivate ãƒãƒ£ãƒ³ãƒãƒ«å¿…é ˆï¼‰
const { data: { session } } = await supabase.auth.getSession();
await supabase.realtime.setAuth(session.access_token);

// ãƒãƒ£ãƒ³ãƒãƒ«ä½œæˆ
const channel = supabase.channel(`org:${orgId}:topic`, {
  config: {
    private: true,           // èªè¨¼å¿…é ˆ
    broadcast: { ack: true } // é…ä¿¡ç¢ºèª
  }
});
```

ãƒˆãƒ”ãƒƒã‚¯å‘½åè¦å‰‡ (CHANNEL_TOPICS):
- org:{orgId}:monthly_reports - ãƒ¬ãƒãƒ¼ãƒˆæ›´æ–°
- org:{orgId}:ai_interview_sessions - AIã‚¤ãƒ³ã‚¿ãƒ“ãƒ¥ãƒ¼
- org:{orgId}:qna_stats - Q&Açµ±è¨ˆï¼ˆå°†æ¥å¯¾å¿œï¼‰
- report:{orgId}:jobs - ãƒ¬ãƒãƒ¼ãƒˆã‚¸ãƒ§ãƒ–é€²æ—

ã‚¤ãƒ™ãƒ³ãƒˆå (BROADCAST_EVENTS):
- REPORT_CHANGE, REPORT_PUBLISHED - ãƒ¬ãƒãƒ¼ãƒˆ
- JOB_CHANGE, JOB_ENQUEUED, JOB_COMPLETED - ã‚¸ãƒ§ãƒ–
- INTERVIEW_SESSION_CHANGE - AIã‚¤ãƒ³ã‚¿ãƒ“ãƒ¥ãƒ¼
- MESSAGE_CREATED - ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ³ã‚°

å†æ¥ç¶šè¨­å®š (RECONNECT_CONFIG):
- maxAttempts: 3
- baseDelayMs: 500
- backoffMultiplier: 1.8
- è¨ˆç®—ä¾‹: 500ms â†’ 900ms â†’ 1620ms

ç’°å¢ƒå¤‰æ•°:
- NEXT_PUBLIC_REALTIME_BROADCAST_MODE: broadcastæœ‰åŠ¹åŒ–
- NEXT_PUBLIC_REALTIME_DEBUG: ãƒ‡ãƒãƒƒã‚°ãƒ­ã‚°æœ‰åŠ¹åŒ–
- NEXT_PUBLIC_REALTIME_DISABLE_RECONNECT: å†æ¥ç¶šç„¡åŠ¹ï¼ˆãƒ†ã‚¹ãƒˆç”¨ï¼‰

ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆæ¸…æƒ:
```typescript
useEffect(() => {
  const channel = supabase.channel(...);
  return () => {
    supabase.removeChannel(channel);
  };
}, []);
```

--------------------------------------------------------------------------------
5.4 å®Ÿè£…ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³
--------------------------------------------------------------------------------

â–  Supabaseãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹
- RLSã¯å¸¸ã«æœ‰åŠ¹åŒ–ã€USING/WITH CHECK ã‚’æ˜ç¤º
- auth.uid() ã¯ SELECT é–¢æ•°ã§ãƒ©ãƒƒãƒ—
- ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã¯ (organization_id, status, updated_at desc) å½¢å¼æ¨å¥¨

â–  Edge Functions
- Denoæ¨™æº–APIã‚’å„ªå…ˆ
- npmä¾å­˜ã¯æœ€å°é™
- @supabase/supabase-js ã¯ãƒãƒ¼ã‚¸ãƒ§ãƒ³å›ºå®š

â–  ç›£æŸ»/ãƒ­ã‚°
- service_role ä½¿ç”¨æ™‚ã¯ service_role_audit ã«è¨˜éŒ²
- é‡è¦æ“ä½œã¯ ops_audit_simple ã«è¨˜éŒ²

â–  Idempotency
- monthly_report_jobs: idempotency_key = hash(org, month_bucket, plan, level)
- translation_jobs: job_id + source_table + source_id
- embedding_jobs: content_hash

--------------------------------------------------------------------------------
5.5 RPCå‹å®šç¾©ãƒ»Type Predicatesï¼ˆ2024-12-23è¿½åŠ ï¼‰
--------------------------------------------------------------------------------

å‹å®šç¾©ãƒ•ã‚¡ã‚¤ãƒ«: src/types/rpc.ts

â–  RPCé–¢æ•°å‹
- GetPlanFeaturesArgs / PlanFeaturesResult
- CountReportRegenerationsArgs
- IncrementUsedCountArgs
- FnBuildMonthlyKpisArgs / MonthlyKpisResult

â–  Viewå‹
- UserOrganizationRow: user_organizations ãƒ“ãƒ¥ãƒ¼
- ViewOrgPlansRow: view_org_plans ãƒ“ãƒ¥ãƒ¼

â–  Type Predicates (å‹ã‚¬ãƒ¼ãƒ‰)
```typescript
import { isPlanFeaturesMap, isMonthlyKpis } from '@/types/rpc';

const data = await supabase.rpc('get_plan_features', { p_org_id: orgId });
if (isPlanFeaturesMap(data)) {
  // data ã¯ PlanFeaturesResult å‹ã¨ã—ã¦æ‰±ãˆã‚‹
}
```

â–  ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£é–¢æ•°
- snakeToCamel<T>(): DB jsonb ã®snake_case â†’ camelCaseå¤‰æ›
- isValidDateFormat(): 'YYYY-MM-DD' å½¢å¼ã®æ—¥ä»˜æ¤œè¨¼
- validatePeriodArgs(): RPCå¼•æ•°ã®æœŸé–“ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³

--------------------------------------------------------------------------------
5.6 Q&A Stats æŠ½è±¡åŒ–ãƒ¬ã‚¤ãƒ¤ãƒ¼ï¼ˆ2024-12-23è¿½åŠ ï¼‰
--------------------------------------------------------------------------------

ãƒ•ã‚¡ã‚¤ãƒ«: src/lib/qna-stats/index.ts, src/lib/qna-stats/service.ts

ç›®çš„: å°†æ¥ã® qna_stats ãƒ†ãƒ¼ãƒ–ãƒ«ç§»è¡Œã«å‚™ãˆãŸæŠ½è±¡åŒ–

â–  ä¸»è¦ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ
- getQnaStats(): çµ±è¨ˆãƒ‡ãƒ¼ã‚¿å–å¾—
- aggregateDailyStats(): æ—¥æ¬¡é›†è¨ˆ
- analyzeUserAgents(): UAåˆ†æ

â–  ç’°å¢ƒå¤‰æ•°
- USE_QNA_STATS_VIEW: true ã§Viewä½¿ç”¨ã€false ã§ãƒ†ãƒ¼ãƒ–ãƒ«ä½¿ç”¨

â–  ä½¿ç”¨ä¾‹
```typescript
import { getQnaStats } from '@/lib/qna-stats';

const { data, error } = await getQnaStats({
  organizationId,
  dateRange: { start, end }
});
```

================================================================================
END OF DOCUMENT
================================================================================
