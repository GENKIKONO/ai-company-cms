# 要件定義（UX・ナビゲーション要件）

## ナビゲーション統一規則

### ロゴ・ブランディング
- **ロゴクリック**: 常に `/` （トップページ）へ遷移
- **ブランド名**: "AIO Hub AI企業CMS"で統一
- **配置**: ヘッダー左端固定
- **レスポンシブ**: モバイルでも省略せず表示

### CTA（Call To Action）分岐ロジック

#### 未ログイン時
- **「無料で始める」ボタン**: `/auth/login` へ遷移
- **「ログイン」リンク**: `/auth/login` へ遷移
- **配置**: ヘッダー右端

#### ログイン済み時
- **「無料で始める」→「ダッシュボード」**: `/dashboard` へ遷移
- **「ダッシュボード」リンク**: ナビゲーションに表示（PCのみ）
- **ユーザーメニュー**: 
  - PC: メールアドレス表示 + サインアウトボタン
  - モバイル: アバターメニュー（ドロップダウン）

### レスポンシブ設計

#### ブレークポイント
- **モバイル**: 320px〜767px
- **タブレット**: 768px〜1023px  
- **デスクトップ**: 1024px〜2560px

#### ヘッダーレイアウト

##### デスクトップ（≥1024px）
```
[ロゴ] [ナビリンク] ────────── [メール表示] [サインアウト]
```

##### モバイル（<768px）
```
[ロゴ] ─────────────────────── [アバターメニュー]
```

#### メール表示制御
- **デスクトップ**: フルメールアドレス表示（最大200px、省略表示）
- **モバイル**: 非表示（アバターメニュー内に格納）
- **崩れ防止**: 長いメールアドレスは `text-overflow: ellipsis` で省略

### ページ構成・遷移

#### 未認証ユーザー向け
| ページ | パス | 説明 |
|--------|------|------|
| トップページ | `/` | サービス紹介・導入事例 |
| 企業一覧 | `/organizations` | 公開企業の一覧表示 |
| 企業詳細 | `/organizations/[slug]` | 個別企業の詳細ページ |
| 検索 | `/search` | 企業・サービス検索 |
| ログイン | `/auth/login` | 認証フォーム |

#### 認証済みユーザー向け
| ページ | パス | 説明 | 権限 |
|--------|------|------|------|
| ダッシュボード | `/dashboard` | 企業データ管理 | セルフサーブ |
| 企業作成 | `/organizations/new` | 新規企業登録 | セルフサーブ |
| 課金管理 | `/dashboard/billing` | Stripe課金設定 | セルフサーブ |
| 代理店管理 | `/dashboard/organizations` | 複数企業管理 | パートナー |

#### 管理者向け
| ページ | パス | 説明 |
|--------|------|------|
| 運用画面 | `/ops` | システム診断・管理 |
| 診断詳細 | `/ops/verify` | 総合ヘルスチェック |
| プローブ | `/ops/probe` | 詳細診断情報 |

### フォーム・入力規則

#### バリデーション表示
- **リアルタイム**: フォーカス離脱時に即座に検証
- **エラー表示**: 赤色テキスト + アイコン
- **成功表示**: 緑色チェック（必要時のみ）
- **必須マーカー**: 赤色アスタリスク（*）

#### 入力補助
- **自動補完**: 住所・業界情報
- **フォーマット例**: プレースホルダーで例示
- **文字数カウント**: 長文入力欄（description等）
- **保存状態**: 自動保存表示（"保存済み"/"保存中"）

### 公開ページ・プレビュー

#### 公開制御
- **公開フラグ**: `is_published` による表示制御
- **プレビュー**: 認証済みユーザーは未公開でもプレビュー可能
- **公開URL**: `/organizations/[slug]` で一意アクセス
- **OGP設定**: タイトル・説明・画像の適切な設定

#### JSON-LD統合
- **構造化データ**: Organization, Service, FAQ, Article, CaseStudy
- **検証**: 公開前にGoogle構造化データテストツールで確認
- **表示**: `<script type="application/ld+json">` でhead内出力

### アクセシビリティ

#### キーボード操作
- **Tab順序**: 論理的な順序でフォーカス移動
- **ショートカット**: 
  - `Alt + H`: ホーム（/）
  - `Alt + D`: ダッシュボード（認証時）
  - `Alt + S`: 検索
- **フォーカス表示**: アウトライン明確化

#### スクリーンリーダー
- **セマンティック**: 適切なHTML要素使用
- **aria-label**: 補助説明の適切な設定
- **見出し階層**: h1-h6の論理的構造
- **ランドマーク**: main, nav, aside, footer

### エラー・フィードバック

#### エラー表示
- **バリデーション**: フィールド単位でのリアルタイム表示
- **APIエラー**: トースト通知での一時表示
- **システムエラー**: 専用エラーページへの誘導
- **404エラー**: カスタム404ページ

#### 成功フィードバック
- **作成完了**: "企業情報を作成しました" + ダッシュボード誘導
- **更新完了**: "変更を保存しました" トースト
- **公開完了**: "公開ページが更新されました" + 公開URL表示

### パフォーマンス要件

#### 表示速度
- **初期表示**: LCP < 2.5秒
- **インタラクション**: FID < 100ms
- **累積レイアウトシフト**: CLS < 0.1
- **画像最適化**: WebP対応 + 遅延読み込み

#### データ読み込み
- **スケルトン**: データ読み込み中の骨格表示
- **無限スクロール**: 企業一覧・検索結果
- **キャッシュ**: 静的データの適切なキャッシュ活用

### 本番環境設定

#### 表示制御
- **コミットバッジ**: `SHOW_BUILD_BADGE=false` で非表示
- **デバッグ情報**: 本番では非表示
- **エラー詳細**: ユーザーには簡潔なメッセージのみ

#### SEO設定
- **robots.txt**: 適切なクローラー制御
- **sitemap.xml**: 公開企業の自動更新
- **meta tags**: 各ページで適切なSEO設定

---

**品質基準**: すべてのUI/UXはこの要件に準拠すること。準拠しない実装はPRで却下します。