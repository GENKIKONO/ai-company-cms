# Supabaseå¯¾å¿œ_è¦ä»¶å®šç¾©æ›¸

## 1. ç›®çš„

Supabaseä¿®æ­£å®Œäº†å¾Œã«ã€DBä¾å­˜æ©Ÿèƒ½ã‚’å®‰å…¨ã«å†æœ‰åŠ¹åŒ–ã™ã‚‹ãŸã‚ã®æ‰‹é †ã¨è¦ä»¶ã‚’æ˜ç¢ºåŒ–ã™ã‚‹ã€‚
**ã“ã®æ–‡æ›¸ã¯ã€Supabaseå¯¾å¿œå®Œäº†å¾Œã«å³åº§ã«é–‹ç™ºã‚’å†é–‹ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ã“ã¨ã‚’ç›®çš„ã¨ã™ã‚‹ã€‚**

---

## 2. å¯¾è±¡ç¯„å›²

- **å¯¾è±¡Phase**: Phase 2, 3, 4ï¼ˆDBä¾å­˜æ©Ÿèƒ½ï¼‰
- **éå¯¾è±¡**: Phase 1, 5ï¼ˆDBéä¾å­˜æ©Ÿèƒ½ - æ—¢ã«ç¨¼åƒä¸­ï¼‰
- **ç¾è¡Œæ–™é‡‘ä½“ç³»**: Starter Â¥2,980 / Pro Â¥8,000 / Business Â¥15,000 / Enterprise ã‚«ã‚¹ã‚¿ãƒ 

---

## 3. ç¾åœ¨ã®å®Ÿè£…çŠ¶æ³æ¦‚è¦

### âœ… å®Œå…¨ç¨¼åƒä¸­ï¼ˆDBåˆ¶ç´„ãªã—ï¼‰
- **Phase 1**: AIå¯è¦–åŒ–UIã€ãƒ¬ãƒãƒ¼ãƒˆè¡¨ç¤ºã€åŸºæœ¬åˆ†æAPI
- **Phase 4**: ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼å‹å®šç¾©ã€UIé››å½¢ã€APIé››å½¢
- **Phase 5**: ç›£è¦–ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã€ã‚¢ãƒ©ãƒ¼ãƒˆAPIé››å½¢ã€ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯API

### âš ï¸ å®Ÿè£…æ¸ˆã¿ãƒ»DBå¾…æ©Ÿä¸­
- **Phase 2**: å¯©æŸ»å±¥æ­´ã€å†å¯©æŸ»APIã€ReportFilters
- **Phase 3**: æœˆæ¬¡ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆãƒ©ã‚¤ãƒ–ãƒ©ãƒªã€Cronã‚¸ãƒ§ãƒ–ã€ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰UI

---

## 4. å®Ÿè¡Œæ¡ä»¶ã¨æ³¨æ„äº‹é …

### ğŸš¨ å®Ÿè¡Œå‰å¿…é ˆç¢ºèªäº‹é …
1. **Supabaseã‚µãƒãƒ¼ãƒˆä½œæ¥­å®Œäº†ç¢ºèª**
   - ã‚µãƒãƒ¼ãƒˆãƒãƒ¼ãƒ ã‹ã‚‰ã®ã€Œä½œæ¥­å®Œäº†ã€é€šçŸ¥å—é ˜
   - ç®¡ç†ç”»é¢ã§ã®ãƒ†ãƒ¼ãƒ–ãƒ«ä¸€è¦§æ­£å¸¸è¡¨ç¤ºç¢ºèª

2. **SQLå®Ÿè¡Œã®çµ¶å¯¾ç¦æ­¢äº‹é …**
   - `auth` ã‚¹ã‚­ãƒ¼ãƒã¸ã®ä¸€åˆ‡ã®æ“ä½œç¦æ­¢
   - èªè¨¼é–¢é€£ãƒ†ãƒ¼ãƒ–ãƒ«ã®å¤‰æ›´ç¦æ­¢
   - RLSè¨­å®šã®ç„¡æ–­å¤‰æ›´ç¦æ­¢

### âš¡ å®‰å…¨ãªå®Ÿè¡Œæ‰‹é †
1. **æ®µéšçš„å®Ÿè¡Œ**: Phase 2 â†’ Phase 3 â†’ Phase 4 ã®é †åºã§å®Ÿè¡Œ
2. **ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—**: å„ãƒ•ã‚§ãƒ¼ã‚ºå®Ÿè¡Œå‰ã«Supabaseãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ç¢ºèª
3. **å‹•ä½œç¢ºèª**: å„ãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆå¾Œã€å³åº§ã«APIå‹•ä½œç¢ºèªå®Ÿæ–½
4. **ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯æº–å‚™**: å•é¡Œç™ºç”Ÿæ™‚ã®ãƒ†ãƒ¼ãƒ–ãƒ«å‰Šé™¤SQLæº–å‚™

---

## 5. DBä¾å­˜æ©Ÿèƒ½ä¸€è¦§ï¼ˆæœ‰åŠ¹åŒ–æ¡ä»¶ä»˜ãï¼‰

| æ©Ÿèƒ½å | é–¢é€£Phase | ä¾å­˜ãƒ†ãƒ¼ãƒ–ãƒ« | Supabaseä¿®æ­£å¾Œã®æœ‰åŠ¹åŒ–æ¡ä»¶ | å®Ÿè¡Œè€… | çŠ¶æ…‹ |
|---------|------------|--------------|----------------------------|---------|-------|
| å¯©æŸ»å±¥æ­´API | Phase 2 | `review_audit` | ãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆ+RLSè¨­å®šå®Œäº†å¾Œ | äººé–“ï¼ˆSQLå®Ÿè¡Œï¼‰ | ğŸ”´ å¾…æ©Ÿä¸­ |
| å†å¯©æŸ»æ©Ÿèƒ½ | Phase 2 | `review_audit` | ãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆ+RLSè¨­å®šå®Œäº†å¾Œ | äººé–“ï¼ˆSQLå®Ÿè¡Œï¼‰ | ğŸ”´ å¾…æ©Ÿä¸­ |
| æœˆæ¬¡ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆ | Phase 3 | `monthly_reports` | ãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆ+RLSè¨­å®šå®Œäº†å¾Œ | äººé–“ï¼ˆSQLå®Ÿè¡Œï¼‰ | ğŸ”´ å¾…æ©Ÿä¸­ |
| Cronã‚¸ãƒ§ãƒ– | Phase 3 | `monthly_reports` | ãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆå®Œäº†å¾Œ | äººé–“ï¼ˆSQLå®Ÿè¡Œï¼‰ | ğŸ”´ å¾…æ©Ÿä¸­ |
| ãƒ¬ãƒãƒ¼ãƒˆãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ | Phase 3 | `monthly_reports` | ãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆå®Œäº†å¾Œ | äººé–“ï¼ˆSQLå®Ÿè¡Œï¼‰ | ğŸ”´ å¾…æ©Ÿä¸­ |
| ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ç®¡ç†ï¼ˆå®Œå…¨ç‰ˆï¼‰ | Phase 4 | `partners` ç¾¤ | Supabaseå®Œäº†+èªè¨¼ç¢ºèªå¾Œ | äººé–“ï¼ˆSQLå®Ÿè¡Œï¼‰ | â³ è¨ˆç”»ä¸­ |
| ç´¹ä»‹ãƒ»æ‰‹æ•°æ–™æ©Ÿèƒ½ | Phase 4 | `partner_referrals`, `commissions` | Phase4åŸºæœ¬ãƒ†ãƒ¼ãƒ–ãƒ«å®Œäº†å¾Œ | äººé–“ï¼ˆSQLå®Ÿè¡Œï¼‰ | â³ è¨ˆç”»ä¸­ |
| ã‚¢ãƒ©ãƒ¼ãƒˆãƒ»ç›£è¦–ï¼ˆå®Œå…¨ç‰ˆï¼‰ | Phase 5 | `alerts`, `metrics` | é‹ç”¨å®‰å®šå¾Œã«æ®µéšå®Ÿè¡Œ | äººé–“ï¼ˆSQLå®Ÿè¡Œï¼‰ | â³ å¾Œå›ã— |

---

## 6. æ®µéšçš„æœ‰åŠ¹åŒ–è¨ˆç”»

### ğŸ¯ Phase 2: é€šå ±ãƒ»æ‰¿èªãƒ•ãƒ­ãƒ¼ï¼ˆå„ªå…ˆåº¦ï¼šæœ€é«˜ï¼‰

#### å®Ÿè¡Œæ¡ä»¶
- Supabaseã‚µãƒãƒ¼ãƒˆä½œæ¥­å®Œäº†
- æ—¢å­˜ãƒ†ãƒ¼ãƒ–ãƒ«ï¼ˆ`organizations`, `app_users`ï¼‰ã®æ­£å¸¸å‹•ä½œç¢ºèª

#### å®Ÿè¡ŒSQL
```sql
-- Step 1: review_audit ãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆ
CREATE TABLE review_audit (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  organization_id UUID REFERENCES organizations(id) ON DELETE CASCADE,
  reviewer_id UUID REFERENCES auth.users(id),
  action TEXT NOT NULL CHECK (action IN ('approve', 'reject', 'request_changes', 'reopen')),
  previous_status TEXT,
  new_status TEXT NOT NULL,
  reason TEXT NOT NULL,
  category TEXT CHECK (category IN ('fake_info', 'inappropriate', 'copyright', 'spam', 'other')),
  notes TEXT,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- Step 2: RLSè¨­å®š
ALTER TABLE review_audit ENABLE ROW LEVEL SECURITY;

-- Step 3: Adminå°‚ç”¨ãƒãƒªã‚·ãƒ¼
CREATE POLICY "review_audit_admin_access" ON review_audit FOR ALL TO authenticated 
USING (EXISTS (
  SELECT 1 FROM app_users 
  WHERE app_users.id = auth.uid() AND app_users.role = 'admin'
));
```

#### æœ‰åŠ¹åŒ–ã•ã‚Œã‚‹æ©Ÿèƒ½
- å¯©æŸ»å±¥æ­´è¡¨ç¤ºï¼ˆ`/admin/reviews/history`ï¼‰
- å†å¯©æŸ»APIï¼ˆ`/api/admin/reviews/reopen`ï¼‰
- ReportFilterså®Œå…¨ç‰ˆ

#### å‹•ä½œç¢ºèªæ–¹æ³•
```bash
# 1. APIå‹•ä½œç¢ºèª
curl GET "/api/admin/reviews/history?organization_id=SAMPLE_ORG_ID"

# 2. UIç¢ºèª
# /admin/reviews/history ãƒšãƒ¼ã‚¸ã§å±¥æ­´è¡¨ç¤ºç¢ºèª

# 3. å†å¯©æŸ»æ©Ÿèƒ½ç¢ºèª
# æ‰¿èªæ¸ˆã¿çµ„ç¹”ã®å†å¯©æŸ»å®Ÿè¡Œç¢ºèª
```

---

### ğŸ¯ Phase 3: æœˆæ¬¡ãƒ¬ãƒãƒ¼ãƒˆæ©Ÿèƒ½ï¼ˆå„ªå…ˆåº¦ï¼šé«˜ï¼‰

#### å®Ÿè¡Œæ¡ä»¶
- Phase 2 å®Œäº†ãƒ»å‹•ä½œç¢ºèªæ¸ˆã¿
- æ—¢å­˜ãƒ‡ãƒ¼ã‚¿ã®æ•´åˆæ€§ç¢ºèª

#### å®Ÿè¡ŒSQL
```sql
-- Step 1: monthly_reports ãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆ
CREATE TABLE monthly_reports (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  organization_id UUID REFERENCES organizations(id) ON DELETE CASCADE,
  year INTEGER NOT NULL,
  month INTEGER NOT NULL,
  status TEXT NOT NULL DEFAULT 'pending' CHECK (status IN ('pending', 'generating', 'completed', 'failed')),
  format TEXT NOT NULL DEFAULT 'html' CHECK (format IN ('html', 'pdf')),
  file_url TEXT,
  data_summary JSONB NOT NULL DEFAULT '{}',
  generated_by UUID REFERENCES auth.users(id),
  generated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  UNIQUE(organization_id, year, month)
);

-- Step 2: RLSè¨­å®š
ALTER TABLE monthly_reports ENABLE ROW LEVEL SECURITY;

-- Step 3: çµ„ç¹”ã‚¢ã‚¯ã‚»ã‚¹ãƒãƒªã‚·ãƒ¼
CREATE POLICY "monthly_reports_org_access" ON monthly_reports FOR ALL TO authenticated 
USING (
  organization_id IN (
    SELECT id FROM organizations WHERE created_by = auth.uid()
    UNION
    SELECT organization_id FROM organization_members WHERE user_id = auth.uid()
  )
);

-- Step 4: Adminå…¨ã‚¢ã‚¯ã‚»ã‚¹ãƒãƒªã‚·ãƒ¼
CREATE POLICY "monthly_reports_admin_access" ON monthly_reports FOR ALL TO authenticated 
USING (EXISTS (
  SELECT 1 FROM app_users 
  WHERE app_users.id = auth.uid() AND app_users.role = 'admin'
));
```

#### æœ‰åŠ¹åŒ–ã•ã‚Œã‚‹æ©Ÿèƒ½
- æœˆæ¬¡ãƒ¬ãƒãƒ¼ãƒˆè‡ªå‹•ç”Ÿæˆ
- Cronã‚¸ãƒ§ãƒ–ï¼ˆ`/api/cron/monthly-report`ï¼‰
- ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ï¼ˆ`/dashboard/reports`ï¼‰
- PDFå‡ºåŠ›ãƒ»ãƒ¡ãƒ¼ãƒ«é€ä¿¡

#### å‹•ä½œç¢ºèªæ–¹æ³•
```bash
# 1. ãƒ¬ãƒãƒ¼ãƒˆç”ŸæˆAPIç¢ºèª
curl POST "/api/my/reports" -d '{"year": 2025, "month": 11}'

# 2. ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ç¢ºèª
# /dashboard/reports ãƒšãƒ¼ã‚¸ã§ãƒ¬ãƒãƒ¼ãƒˆä¸€è¦§è¡¨ç¤ºç¢ºèª

# 3. Cronã‚¸ãƒ§ãƒ–ç¢ºèªï¼ˆæ‰‹å‹•å®Ÿè¡Œï¼‰
curl POST "/api/cron/monthly-report"
```

---

### ğŸ¯ Phase 4: ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼æ©Ÿèƒ½ï¼ˆå„ªå…ˆåº¦ï¼šä¸­ï¼‰

#### å®Ÿè¡Œæ¡ä»¶
- Phase 3 å®Œäº†ãƒ»å®‰å®šç¨¼åƒç¢ºèªï¼ˆ1é€±é–“ç¨‹åº¦ï¼‰
- ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼æ©Ÿèƒ½è¦ä»¶ã®æœ€çµ‚ç¢ºèª

#### å®Ÿè¡ŒSQLï¼ˆæ®µéšçš„å®Ÿè¡Œï¼‰
```sql
-- Step 1: partners åŸºæœ¬ãƒ†ãƒ¼ãƒ–ãƒ«
CREATE TABLE partners (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  user_id UUID REFERENCES auth.users(id),
  business_name TEXT NOT NULL,
  business_type TEXT NOT NULL CHECK (business_type IN ('agency', 'freelancer', 'consultant', 'integrator', 'reseller')),
  status TEXT NOT NULL DEFAULT 'pending' CHECK (status IN ('pending', 'active', 'suspended', 'terminated')),
  tier TEXT NOT NULL DEFAULT 'bronze' CHECK (tier IN ('bronze', 'silver', 'gold', 'platinum')),
  contact_email TEXT NOT NULL,
  referral_code TEXT UNIQUE NOT NULL,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- Step 2: partner_referrals ãƒ†ãƒ¼ãƒ–ãƒ«
CREATE TABLE partner_referrals (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  partner_id UUID REFERENCES partners(id) ON DELETE CASCADE,
  organization_id UUID REFERENCES organizations(id) ON DELETE CASCADE,
  referral_code TEXT NOT NULL,
  status TEXT NOT NULL DEFAULT 'pending' CHECK (status IN ('pending', 'converted', 'expired', 'invalid')),
  conversion_date TIMESTAMP WITH TIME ZONE,
  lifetime_value INTEGER DEFAULT 0,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- Step 3: RLSè¨­å®š
ALTER TABLE partners ENABLE ROW LEVEL SECURITY;
ALTER TABLE partner_referrals ENABLE ROW LEVEL SECURITY;

-- Step 4: ãƒãƒªã‚·ãƒ¼è¨­å®š
CREATE POLICY "partners_self_access" ON partners FOR ALL TO authenticated 
USING (user_id = auth.uid());

CREATE POLICY "partners_admin_access" ON partners FOR ALL TO authenticated 
USING (EXISTS (
  SELECT 1 FROM app_users 
  WHERE app_users.id = auth.uid() AND app_users.role = 'admin'
));
```

#### æœ‰åŠ¹åŒ–ã•ã‚Œã‚‹æ©Ÿèƒ½
- ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ç™»éŒ²ãƒ»ç®¡ç†
- ç´¹ä»‹ã‚³ãƒ¼ãƒ‰è¿½è·¡
- ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰å®Œå…¨ç‰ˆ
- æˆæœç®¡ç†

---

## 7. æ—§å®šç¾©ãƒ•ã‚¡ã‚¤ãƒ«ã®æ£šå¸çµæœ

| ãƒ•ã‚¡ã‚¤ãƒ« | çŠ¶æ³ | å¯¾å¿œæ–¹é‡ | ç†ç”± |
|-----------|------|----------|------|
| `/docs/release/pricing_overhaul_changes.md` | âŒ å‰Šé™¤æ¨å¥¨ | å‰Šé™¤ | æ—§æ–™é‡‘ä½“ç³»ï¼ˆFree/Basic/Business/Enterpriseï¼‰è¨˜è¼‰ |
| `/docs/release/pricing_overhaul_scan.md` | âŒ å‰Šé™¤æ¨å¥¨ | å‰Šé™¤ | æ—§æ–™é‡‘ä½“ç³»è¨˜è¼‰ãƒ»ä¸€æ™‚çš„ãªã‚¹ã‚­ãƒ£ãƒ³çµæœ |
| `/docs/requirements_overview.md` | âš ï¸ è¦æ›´æ–° | ä¿®æ­£ | Â¥5,000/æœˆå˜ä¸€ãƒ—ãƒ©ãƒ³ã®è¨˜è¼‰ã‚ã‚Š |
| `/docs/requirements_business.md` | âœ… æœ€æ–°ç‰ˆ | ä¿æŒ | ç¾è¡Œæ–™é‡‘ä½“ç³»ï¼ˆStarter/Pro/Business/Enterpriseï¼‰è¨˜è¼‰æ¸ˆã¿ |
| `/docs/requirements_system.md` | âœ… æœ€æ–°ç‰ˆ | ä¿æŒ | æŠ€è¡“è¦ä»¶ã¯æœ€æ–° |
| `/docs/sprints.md` | âš ï¸ ä¿ç•™ | ä¿ç•™ | å¤ã„ã‚¹ãƒ—ãƒªãƒ³ãƒˆè¨ˆç”»ãƒ»å‚è€ƒè³‡æ–™ã¨ã—ã¦ä¿æŒ |
| `/docs/implementation.md` | âœ… æœ€æ–°ç‰ˆ | ä¿æŒ | å®Ÿè£…ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³æœ€æ–° |

---

## 8. å®Ÿè¡Œãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

### Phase 2 å®Ÿè¡Œå‰ãƒã‚§ãƒƒã‚¯
- [ ] Supabaseã‚µãƒãƒ¼ãƒˆå®Œäº†ç¢ºèª
- [ ] æ—¢å­˜ãƒ†ãƒ¼ãƒ–ãƒ«æ­£å¸¸å‹•ä½œç¢ºèª
- [ ] ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—çŠ¶æ³ç¢ºèª
- [ ] `review_audit` ãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆSQLæº–å‚™å®Œäº†
- [ ] RLSãƒãƒªã‚·ãƒ¼SQLæº–å‚™å®Œäº†
- [ ] å‹•ä½œç¢ºèªæ‰‹é †æº–å‚™å®Œäº†

### Phase 2 å®Ÿè¡Œå¾Œãƒã‚§ãƒƒã‚¯
- [ ] ãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆæˆåŠŸç¢ºèª
- [ ] RLSè¨­å®šç¢ºèª
- [ ] å¯©æŸ»å±¥æ­´APIå‹•ä½œç¢ºèª
- [ ] å†å¯©æŸ»æ©Ÿèƒ½å‹•ä½œç¢ºèª
- [ ] ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰UIè¡¨ç¤ºç¢ºèª

### Phase 3 å®Ÿè¡Œå‰ãƒã‚§ãƒƒã‚¯
- [ ] Phase 2 å®‰å®šç¨¼åƒç¢ºèªï¼ˆ1-2æ—¥ï¼‰
- [ ] `monthly_reports` ãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆSQLæº–å‚™å®Œäº†
- [ ] ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆãƒ©ã‚¤ãƒ–ãƒ©ãƒªå‹•ä½œç¢ºèª
- [ ] Cronã‚¸ãƒ§ãƒ–è¨­å®šç¢ºèª

### Phase 3 å®Ÿè¡Œå¾Œãƒã‚§ãƒƒã‚¯
- [ ] ãƒ¬ãƒãƒ¼ãƒˆç”ŸæˆAPIå‹•ä½œç¢ºèª
- [ ] ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰è¡¨ç¤ºç¢ºèª
- [ ] PDFç”Ÿæˆæ©Ÿèƒ½ç¢ºèª
- [ ] Cronã‚¸ãƒ§ãƒ–å‹•ä½œç¢ºèª

### Phase 4 å®Ÿè¡Œå‰ãƒã‚§ãƒƒã‚¯
- [ ] Phase 3 å®‰å®šç¨¼åƒç¢ºèªï¼ˆ1é€±é–“ï¼‰
- [ ] ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼æ©Ÿèƒ½è¦ä»¶æœ€çµ‚ç¢ºèª
- [ ] `partners` é–¢é€£ãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆSQLæº–å‚™å®Œäº†

---

## 9. ã‚¨ãƒ©ãƒ¼æ™‚ã®ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯æ‰‹é †

### ãƒ†ãƒ¼ãƒ–ãƒ«å‰Šé™¤SQLï¼ˆç·Šæ€¥æ™‚ç”¨ï¼‰
```sql
-- Phase 4 ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯
DROP TABLE IF EXISTS partner_referrals CASCADE;
DROP TABLE IF EXISTS partners CASCADE;

-- Phase 3 ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯  
DROP TABLE IF EXISTS monthly_reports CASCADE;

-- Phase 2 ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯
DROP TABLE IF EXISTS review_audit CASCADE;
```

### ç·Šæ€¥æ™‚é€£çµ¡å…ˆ
- **é–‹ç™ºè²¬ä»»è€…**: [é–‹ç™ºãƒãƒ¼ãƒ è²¬ä»»è€…]
- **Supabaseã‚µãƒãƒ¼ãƒˆ**: [ã‚µãƒãƒ¼ãƒˆãƒã‚±ãƒƒãƒˆã‚·ã‚¹ãƒ†ãƒ ]
- **ã‚·ã‚¹ãƒ†ãƒ ç®¡ç†è€…**: [ã‚·ã‚¹ãƒ†ãƒ ç®¡ç†è€…]

---

## 10. æˆåŠŸç¢ºèªæŒ‡æ¨™

### Phase 2 æˆåŠŸæŒ‡æ¨™
- å¯©æŸ»å±¥æ­´APIå¿œç­”æ™‚é–“ < 2ç§’
- å†å¯©æŸ»æ©Ÿèƒ½ã‚¨ãƒ©ãƒ¼ç‡ < 1%
- ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰UIæ­£å¸¸è¡¨ç¤ºç‡ 100%

### Phase 3 æˆåŠŸæŒ‡æ¨™  
- æœˆæ¬¡ãƒ¬ãƒãƒ¼ãƒˆç”ŸæˆæˆåŠŸç‡ > 98%
- Cronã‚¸ãƒ§ãƒ–å®Ÿè¡ŒæˆåŠŸç‡ > 99%
- PDFç”ŸæˆæˆåŠŸç‡ > 95%

### Phase 4 æˆåŠŸæŒ‡æ¨™
- ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ç™»éŒ²æˆåŠŸç‡ > 99%
- ç´¹ä»‹è¿½è·¡ç²¾åº¦ 100%
- ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰å¿œç­”æ™‚é–“ < 3ç§’

---

**æœ€çµ‚æ›´æ–°**: 2025å¹´11æœˆ9æ—¥  
**æ¬¡å›æ›´æ–°äºˆå®š**: Supabaseå¯¾å¿œå®Œäº†å¾Œ  
**æ–‡æ›¸ç®¡ç†è€…**: AIO Hubé–‹ç™ºãƒãƒ¼ãƒ 