# ğŸš¨ P0 ã‚¹ãƒ¢ãƒ¼ã‚¯ãƒ†ã‚¹ãƒˆ Issues

**Branch:** `release/p0-freeze`  
**Test Date:** 2025-09-23  
**Status:** ğŸ”´ P0 æœªå®Œäº†

---

## Issue #1: [P0] æœ¬ç•ªç’°å¢ƒ API Routes ãŒ 404
**å„ªå…ˆåº¦:** Critical  
**å½±éŸ¿:** P0 ã‚¹ãƒ¢ãƒ¼ã‚¯ãƒ†ã‚¹ãƒˆå®Ÿè¡Œä¸å¯

### å†ç¾æ‰‹é †
1. `curl -X GET "https://aiohub.jp/api/ops/config-check"`
2. æœŸå¾…: JSON ãƒ¬ã‚¹ãƒãƒ³ã‚¹
3. å®Ÿéš›: 404 HTML ãƒ¬ã‚¹ãƒãƒ³ã‚¹

### æŠ€è¡“è©³ç´°
```bash
# å®Ÿè¡Œã‚³ãƒãƒ³ãƒ‰
curl -X GET "https://aiohub.jp/api/ops/config-check"

# å®Ÿéš›ã®çµæœ
HTTP Status: 404
Content-Type: text/html
Body: "404: This page could not be found."
```

### åŸå› åˆ†æ
- æœ¬ç•ªç’°å¢ƒã« `release/p0-freeze` ãƒ–ãƒ©ãƒ³ãƒãŒãƒ‡ãƒ—ãƒ­ã‚¤ã•ã‚Œã¦ã„ãªã„
- ç¾åœ¨ã®æœ¬ç•ªç’°å¢ƒã¯å¤ã„ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’å®Ÿè¡Œä¸­
- API routes (`/api/ops/*`, `/api/admin/*`) ãŒå­˜åœ¨ã—ãªã„

### è§£æ±ºæ–¹æ³•
1. `release/p0-freeze` ãƒ–ãƒ©ãƒ³ãƒã‚’ `main` ã«ãƒãƒ¼ã‚¸
2. Vercel æœ¬ç•ªãƒ‡ãƒ—ãƒ­ã‚¤å®Ÿè¡Œ
3. ãƒ‡ãƒ—ãƒ­ã‚¤å®Œäº†ç¢ºèªå¾Œã«ã‚¹ãƒ¢ãƒ¼ã‚¯ãƒ†ã‚¹ãƒˆå†å®Ÿè¡Œ

### P0ãƒªãƒªãƒ¼ã‚¹ã¸ã®å½±éŸ¿
**ãƒ–ãƒ­ãƒƒã‚«ãƒ¼**: æœ¬ç•ªãƒ‡ãƒ—ãƒ­ã‚¤å®Œäº†ã¾ã§ P0 ã‚¹ãƒ¢ãƒ¼ã‚¯ãƒ†ã‚¹ãƒˆå®Ÿè¡Œä¸å¯

---

## Issue #2: [P0] ãƒ¡ãƒ¼ãƒ«ç¢ºèªçŠ¶æ³ã®ç¢ºèªãŒå¿…è¦
**å„ªå…ˆåº¦:** High  
**å½±éŸ¿:** ã‚¹ãƒ¢ãƒ¼ã‚¯ãƒ†ã‚¹ãƒˆ A ã®å‰ææ¡ä»¶

### ç¢ºèªäº‹é …
- `ggg.golf.66@gmail.com` ã®ãƒ¡ãƒ¼ãƒ«ç¢ºèªãƒªãƒ³ã‚¯ã‚¯ãƒªãƒƒã‚¯å®Œäº†ç¢ºèª
- Supabase ã§ `email_confirmed_at` ãŒè¨­å®šã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª

### æ¤œè¨¼æ–¹æ³•
```bash
# æœ¬ç•ªãƒ‡ãƒ—ãƒ­ã‚¤å¾Œã«å®Ÿè¡Œ
curl -X POST https://aiohub.jp/api/admin/auth/status \
  -H "Content-Type: application/json" \
  -H "x-admin-token: [JWT_TOKEN]" \
  -d '{"email":"ggg.golf.66@gmail.com"}'

# æœŸå¾…çµæœ
{
  "success": true,
  "data": {
    "exists": true,
    "is_confirmed": true,  // â† ã“ã®å€¤ã‚’ç¢ºèª
    "email_confirmed_at": "2025-09-23T...",
    "is_banned": false
  }
}
```

---

## Issue #3: [P0] Supabase Migration å®Ÿè¡Œç¢ºèª
**å„ªå…ˆåº¦:** High  
**å½±éŸ¿:** `/api/auth/sync` API ã®å‹•ä½œ

### ç¢ºèªäº‹é …
- Supabase SQL Editor ã§ `20250923_create_app_users.sql` å®Ÿè¡Œå®Œäº†ç¢ºèª
- `app_users` ãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆç¢ºèª
- RLS ãƒãƒªã‚·ãƒ¼è¨­å®šç¢ºèª

### æ¤œè¨¼æ–¹æ³•
```sql
-- Supabase SQL Editor ã§å®Ÿè¡Œ
SELECT table_name 
FROM information_schema.tables 
WHERE table_schema = 'public' 
  AND table_name = 'app_users';

-- æœŸå¾…çµæœ: app_users ãƒ†ãƒ¼ãƒ–ãƒ«ãŒå­˜åœ¨ã™ã‚‹ã“ã¨
```

---

## ğŸ¯ P0 å®Œäº†ã¾ã§ã®ã‚¯ãƒªãƒ†ã‚£ã‚«ãƒ«ãƒ‘ã‚¹

### ã‚¹ãƒ†ãƒƒãƒ— 1: æœ¬ç•ªãƒ‡ãƒ—ãƒ­ã‚¤å®Ÿè¡Œ
```bash
# 1. ãƒ–ãƒ©ãƒ³ãƒãƒãƒ¼ã‚¸
git checkout main
git merge release/p0-freeze

# 2. ãƒ—ãƒƒã‚·ãƒ¥ (Vercelè‡ªå‹•ãƒ‡ãƒ—ãƒ­ã‚¤ãƒˆãƒªã‚¬ãƒ¼)
git push origin main

# 3. ãƒ‡ãƒ—ãƒ­ã‚¤å®Œäº†ç¢ºèª
curl https://aiohub.jp/api/ops/config-check
```

### ã‚¹ãƒ†ãƒƒãƒ— 2: å‰ææ¡ä»¶ç¢ºèª
- [ ] ãƒ¡ãƒ¼ãƒ«ç¢ºèªå®Œäº† (`ggg.golf.66@gmail.com`)
- [ ] Supabase migration å®Ÿè¡Œ
- [ ] API endpoints å‹•ä½œç¢ºèª

### ã‚¹ãƒ†ãƒƒãƒ— 3: ã‚¹ãƒ¢ãƒ¼ã‚¯ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
- [ ] Test A: æ–°è¦ç™»éŒ²â†’ç¢ºèªãƒ¡ãƒ¼ãƒ«â†’ãƒ­ã‚°ã‚¤ãƒ³â†’dashboard
- [ ] Test B: ä¼æ¥­ä½œæˆâ†’å…¬é–‹â†’/o/{slug}è¡¨ç¤º  
- [ ] Test C: Stripeæ±ºæ¸ˆâ†’Webhookç¢ºèª
- [ ] Test D: ãƒ­ã‚°ã‚¢ã‚¦ãƒˆâ†’å†ãƒ­ã‚°ã‚¤ãƒ³

---

## ğŸ“Š ç¾åœ¨ã® P0 é”æˆç‡

| é …ç›® | é€²æ— | çŠ¶æ³ |
|------|------|------|
| ã‚³ãƒ¼ãƒ‰å®Ÿè£… | 100% | âœ… å®Œäº† |
| ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³æº–å‚™ | 100% | âœ… å®Œäº† |
| æœ¬ç•ªãƒ‡ãƒ—ãƒ­ã‚¤ | 0% | âŒ æœªå®Ÿæ–½ |
| å‰ææ¡ä»¶ç¢ºèª | 50% | âš ï¸ ä¸€éƒ¨ç¢ºèªå¾…ã¡ |
| ã‚¹ãƒ¢ãƒ¼ã‚¯ãƒ†ã‚¹ãƒˆ | 0% | âŒ ãƒ‡ãƒ—ãƒ­ã‚¤å¾…ã¡ |

**ç·åˆé€²æ—: 70%**  
**ãƒ–ãƒ­ãƒƒã‚«ãƒ¼: æœ¬ç•ªãƒ‡ãƒ—ãƒ­ã‚¤æœªå®Œäº†**

---

## ğŸš€ æ¬¡ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³

### å³åº§å®Ÿè¡Œå¿…é ˆ
1. **æœ¬ç•ªãƒ‡ãƒ—ãƒ­ã‚¤**: `release/p0-freeze` â†’ `main` â†’ Vercel deploy
2. **ãƒ‡ãƒ—ãƒ­ã‚¤ç¢ºèª**: API endpoints ã® 200 ãƒ¬ã‚¹ãƒãƒ³ã‚¹ç¢ºèª
3. **å‰ææ¡ä»¶ãƒã‚§ãƒƒã‚¯**: ãƒ¡ãƒ¼ãƒ«ç¢ºèªãƒ»DB migration

### ãƒ‡ãƒ—ãƒ­ã‚¤å®Œäº†å¾Œ
1. **ã‚¹ãƒ¢ãƒ¼ã‚¯ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ**: æœ¬ç•ªç’°å¢ƒã§ A-D å®Ÿæ–½
2. **çµæœè¨˜éŒ²**: CHECKLIST_P0.md æ›´æ–°
3. **P0å®Œäº†åˆ¤å®š**: ğŸŸ¢/ğŸ”´ ã®æœ€çµ‚åˆ¤å®š

---

**âš ï¸ é‡è¦**: P0 ãƒªãƒªãƒ¼ã‚¹åˆ¤å®šã¯æœ¬ç•ªãƒ‡ãƒ—ãƒ­ã‚¤å®Œäº†å¾Œã®ã‚¹ãƒ¢ãƒ¼ã‚¯ãƒ†ã‚¹ãƒˆçµæœã«ä¾å­˜