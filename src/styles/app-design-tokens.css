/**
 * AIO Hub Unified Design Tokens
 * 全アプリで参照する統一デザイントークン - Phase 1
 * ⚠️ 破壊的変更を避けるため、既存トークンとの互換性を保持
 */

:root {
  /* === Core Brand Colors === */
  --aio-primary: #007AFF;           /* Apple Blue - メインカラー */
  --aio-primary-hover: #0060DF;     /* Hover状態 */
  --aio-surface: #F5F5F7;           /* Apple Gray - 背景面 */
  --aio-muted: #f8f9fa;             /* 軽いグレー */
  --text-on-primary: #ffffff;       /* プライマリ上のテキスト */

  /* === Enhanced Color System === */
  --color-text-primary: #1D1D1F;    /* Apple標準黒 */
  --color-text-secondary: #636366;  /* AA準拠グレー */
  --color-text-tertiary: #767680;   /* 薄いグレー */

  /* === Dashboard Specific Tokens (iCloud Dense統一) === */
  --dashboard-bg: #f5f5f7;          /* Apple Gray - iCloud風に統一 */
  --dashboard-card-bg: #ffffff;     /* カード背景 */
  --dashboard-card-border: rgba(0, 0, 0, 0.06); /* 繊細なボーダー */
  --dashboard-card-shadow: 0 1px 3px rgba(0, 0, 0, 0.08), 0 4px 12px rgba(0, 0, 0, 0.05);
  --dashboard-card-shadow-hover: 0 2px 8px rgba(0, 0, 0, 0.1), 0 8px 24px rgba(0, 0, 0, 0.08);

  /* === Status Colors === */
  --status-success: #22c55e;        /* green-500 */
  --status-success-bg: #dcfce7;     /* green-100 */
  --status-warning: #eab308;        /* yellow-500 */
  --status-warning-bg: #fef9c3;     /* yellow-100 */
  --status-error: #ef4444;          /* red-500 */
  --status-error-bg: #fee2e2;       /* red-100 */
  --status-info: #3b82f6;           /* blue-500 */
  --status-info-bg: #dbeafe;        /* blue-100 */

  /* === Semantic Color Tokens (aio-* naming for Tailwind arbitrary value) === */
  --aio-info: #1e40af;              /* blue-800 - info badge text */
  --aio-info-muted: #dbeafe;        /* blue-100 - info badge background */
  --aio-info-surface: #eff6ff;      /* blue-50 - info box background */
  --aio-info-border: #bfdbfe;       /* blue-200 - info box border */
  --aio-success: #166534;           /* green-800 - success badge text */
  --aio-success-muted: #dcfce7;     /* green-100 - success badge background */
  --aio-warning: #854d0e;           /* yellow-800 - warning badge text */
  --aio-warning-muted: #fef9c3;     /* yellow-100 - warning badge background */
  --aio-danger: #991b1b;            /* red-800 - danger badge text */
  --aio-danger-muted: #fee2e2;      /* red-100 - danger badge background */

  /* === Pending Status (Orange系) === */
  --status-pending: #f59e0b;        /* amber-500 - pending indicator */
  --status-pending-bg: #fef3c7;     /* amber-100 - pending background */
  --aio-pending: #92400e;           /* amber-800 - pending badge text */
  --aio-pending-muted: #fef3c7;     /* amber-100 - pending badge background */
  --aio-pending-surface: #fffbeb;   /* amber-50 - pending box background */
  --aio-pending-border: #fde68a;    /* amber-200 - pending box border */

  /* === Purple系 (AI機能・トレンド用) === */
  --aio-purple: #7c3aed;            /* violet-600 - purple accent */
  --aio-purple-muted: #ede9fe;      /* violet-100 - purple background */
  --aio-purple-surface: #f5f3ff;    /* violet-50 - purple box background */
  --aio-purple-border: #ddd6fe;     /* violet-200 - purple box border */

  /* === Indigo系 (チャット・選択状態用) === */
  --aio-indigo: #4f46e5;            /* indigo-600 - indigo accent */
  --aio-indigo-muted: #e0e7ff;      /* indigo-100 - indigo background */
  --aio-indigo-surface: #eef2ff;    /* indigo-50 - indigo box background */
  --aio-indigo-border: #c7d2fe;     /* indigo-200 - indigo box border */

  /* === Icon Colors === */
  --color-icon: #6b7280;            /* gray-500 - default icon */
  --color-icon-muted: #9ca3af;      /* gray-400 - muted icon */

  /* === Stripe-inspired Interaction Tokens === */
  --focus-ring: 0 0 0 3px rgba(0, 122, 255, 0.25);
  --focus-ring-error: 0 0 0 3px rgba(239, 68, 68, 0.25);
  --input-border: #d1d5db;          /* gray-300 */
  --input-border-hover: #9ca3af;    /* gray-400 */
  --input-border-focus: var(--aio-primary);
  --input-bg: #ffffff;
  --input-bg-disabled: #f9fafb;     /* gray-50 */
  --input-placeholder: #9ca3af;     /* gray-400 */

  /* === Button Interaction States (iCloud Dense統一) === */
  --btn-primary-bg: var(--aio-primary);
  --btn-primary-hover: var(--aio-primary-hover);
  --btn-primary-active: #0051b3;
  --btn-secondary-bg: #ffffff;
  --btn-secondary-border: rgba(0, 0, 0, 0.12);
  --btn-secondary-hover: #f9fafb;
  --btn-danger-bg: var(--status-error);
  --btn-danger-hover: #dc2626;

  /* === Unified Button Sizes (iCloud Dense) === */
  --btn-height-sm: 32px;    /* コンパクト */
  --btn-height-md: 36px;    /* 標準 */
  --btn-height-lg: 40px;    /* 大きめ */
  --btn-height-xl: 44px;    /* タップターゲット最大 */
  --btn-padding-sm: 12px;
  --btn-padding-md: 16px;
  --btn-padding-lg: 20px;
  --btn-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
  --btn-shadow-hover: 0 2px 4px rgba(0, 0, 0, 0.1);

  /* === Table Tokens === */
  --table-header-bg: #f9fafb;       /* gray-50 */
  --table-row-hover: #f3f4f6;       /* gray-100 */
  --table-border: var(--dashboard-card-border);
  
  /* === Shadow System (iCloud調) === */
  --shadow-xs: 0 1px 2px rgba(0, 0, 0, 0.04);
  --shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.06), 0 4px 6px rgba(0, 0, 0, 0.05);
  --shadow-lg: 0 4px 12px rgba(9, 30, 66, 0.06), 0 16px 32px rgba(9, 30, 66, 0.08);
  --shadow-elevated: 
    0 0 0 1px rgba(255, 255, 255, 0.05),
    0 1px 2px rgba(0, 0, 0, 0.04),
    0 8px 32px rgba(0, 0, 0, 0.12);
  
  /* === Additional Design Tokens === */
  --aio-border-subtle: rgba(12, 26, 53, 0.08);
  --aio-elevation-1: 0 1px 3px rgba(0, 0, 0, 0.06), 0 4px 6px rgba(0, 0, 0, 0.05);
  
  /* === Glass Morphism Tokens === */
  --glass-bg: rgba(255, 255, 255, 0.75);
  --glass-border: rgba(255, 255, 255, 0.3);
  --glass-blur: blur(20px) saturate(180%);
  
  /* === Motion Tokens (Spring-based) === */
  --ease-spring: cubic-bezier(0.34, 1.56, 0.64, 1);
  --ease-standard: cubic-bezier(0.4, 0.0, 0.2, 1);
  --duration-sm: 180ms;
  --duration-md: 280ms;
  --duration-lg: 350ms;
  
  /* === Spacing (Compact 8pt Grid - iCloud Dense) === */
  --space-xs: 4px;
  --space-sm: 8px;
  --space-md: 12px;      /* 16px → 12px: 密度向上 */
  --space-lg: 16px;      /* 24px → 16px: 密度向上 */
  --space-xl: 24px;      /* 32px → 24px: 密度向上 */
  --space-2xl: 32px;     /* 48px → 32px: 密度向上 */
  
  /* === Typography === */
  --font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", "Helvetica Neue", sans-serif;
  --font-size-body: 1rem;
  --font-weight-medium: 500;
  --font-weight-semibold: 600;
  --font-weight-bold: 700;
  
  /* === Border Radius === */
  --radius-sm: 4px;
  --radius-md: 8px;
  --radius-lg: 12px;
  --radius-xl: 16px;
  --radius-2xl: 20px;
  
  /* === Z-Index Scale === */
  --z-dropdown: 1000;
  --z-modal: 1050;
  --z-toast: 1080;

  /* === Tooltip === */
  --tooltip-bg: #1f2937;            /* gray-800 */
  --tooltip-text: #ffffff;

  /* === Code Block === */
  --code-block-bg: #1f2937;         /* gray-800 */
  --code-block-text: #4ade80;       /* green-400 */
}

/* === Utility Classes (iCloud Quality) === */

/* Glass Card - White background visible version */
.glass-card {
  background: rgba(255, 255, 255, 0.85);
  backdrop-filter: blur(16px) saturate(180%);
  border: 1px solid var(--aio-border-subtle);
  box-shadow: var(--aio-elevation-1);
  border-radius: var(--radius-xl);
  transition: all var(--duration-md) var(--ease-standard);
}

.glass-card:hover {
  box-shadow: 
    0 0 0 1px rgba(255, 255, 255, 0.08),
    0 2px 4px rgba(0, 0, 0, 0.06),
    0 12px 40px rgba(0, 0, 0, 0.15);
  transform: translateY(-2px);
}

/* FAQ Surface Card - Non-glass version for better visibility */
.faq-surface-card {
  background: var(--aio-surface);
  border: 1px solid var(--aio-border-subtle);
  box-shadow: var(--aio-elevation-1);
  border-radius: var(--radius-xl);
  transition: all var(--duration-md, 180ms) var(--ease-standard, ease-out);
}

.faq-surface-card:hover {
  transform: translateY(-1px);
}

/* Premium Shadow - Phase 2で使用 */
.shadow-premium {
  box-shadow: var(--shadow-lg);
}

/* Premium Button Base - Phase 4で使用 */
.premium-button {
  background: linear-gradient(135deg, #0A84FF 0%, #0060DF 100%);
  color: #fff;
  box-shadow: 
    0 1px 2px rgba(0, 96, 223, 0.2),
    0 10px 32px rgba(0, 96, 223, 0.24);
  border: none;
  border-radius: var(--radius-lg);
  padding: var(--space-md) var(--space-xl);
  font-weight: var(--font-weight-semibold);
  transition: transform var(--duration-md) var(--ease-spring);
  cursor: pointer;
}

.premium-button:hover,
.premium-button:focus-visible {
  transform: translateY(-2px);
  box-shadow: 
    0 2px 4px rgba(0, 96, 223, 0.25),
    0 16px 40px rgba(0, 96, 223, 0.3);
}

.premium-button:active {
  transform: translateY(-1px);
}

/* Motion Presets - Phase 3で使用 */
.spring-bounce {
  transition: transform var(--duration-md) var(--ease-spring);
}

.spring-bounce:hover {
  transform: translateY(-2px) scale(1.02);
}

/* 既存トークンとの互換性レイヤー */
.aio-surface {
  background-color: var(--aio-surface);
}

.hig-bg-surface {
  background-color: var(--aio-surface);
}

.hig-text-primary {
  color: var(--aio-primary);
}

.hig-bg-primary {
  background-color: var(--aio-primary);
}

/* === Accessibility === */
/* === Scroll Reveal Animations === */
.reveal-base {
  opacity: 0;
  transform: translateY(16px);
  transition: opacity 280ms ease-out, transform 280ms ease-out;
  will-change: opacity, transform;
}

.reveal-up.is-visible {
  opacity: 1;
  transform: translateY(0);
}

.reveal-fade.is-visible {
  opacity: 1;
  transform: none;
}

.reveal-delay-100 {
  transition-delay: 100ms;
}

.reveal-delay-200 {
  transition-delay: 200ms;
}

.reveal-delay-300 {
  transition-delay: 300ms;
}

/* === Focus Visibility Enhancement === */
.glass-card:focus-visible,
.premium-button:focus-visible,
.spring-bounce:focus-visible,
button:focus-visible,
a:focus-visible,
[role="button"]:focus-visible {
  outline: 2px solid var(--aio-primary);
  outline-offset: 2px;
  box-shadow: 0 0 0 4px rgba(0, 122, 255, 0.2);
}

/* Enhanced Interactive States */
.spring-bounce:active {
  transform: translateY(-1px) scale(0.98);
}

.glass-card:active,
.premium-button:active {
  transform: translateY(0) scale(0.98);
}

/* === Accessibility Support === */
@media (prefers-reduced-motion: reduce) {
  .glass-card,
  .premium-button,
  .spring-bounce,
  .reveal-base {
    transition: none;
  }
  
  .glass-card:hover,
  .glass-card:active,
  .premium-button:hover,
  .premium-button:active,
  .spring-bounce:hover,
  .spring-bounce:active {
    transform: none;
  }

  .reveal-base {
    opacity: 1;
    transform: none;
  }
}

/* === Section Spacing === */
.section-y {
  padding-top: 4rem;    /* 64px - white sections */
  padding-bottom: 4rem; /* 64px - white sections */
}

/* Override for muted sections */
.sec-alt .section-y,
[style*="--aio-muted"] .section-y {
  padding-top: 6rem;    /* 96px - muted sections */
  padding-bottom: 6rem; /* 96px - muted sections */
}

/* Alternative approach using tone-specific classes */
.section-white {
  padding-top: 4rem;    /* pt-16 */
  padding-bottom: 4rem; /* pb-16 */
}

.section-muted {
  padding-top: 6rem;    /* pt-24 */
  padding-bottom: 6rem; /* pb-24 */
}

/* === Mobile Navigation Timing Unification === */
:root {
  --nav-transition-duration: var(--duration-md); /* 280ms統一 */
  --nav-transition-easing: var(--ease-spring);
}

/* FABボタンとドロワーの同期 */
.nav-fab-closed { 
  transform: rotate(0deg); 
  transition: 
    transform var(--nav-transition-duration) var(--nav-transition-easing),
    background-color var(--duration-sm) var(--ease-standard);
}

.nav-fab-open { 
  transform: rotate(90deg);
  transition: 
    transform var(--nav-transition-duration) var(--nav-transition-easing),
    background-color var(--duration-sm) var(--ease-standard);
}

.mobile-nav-drawer {
  transition: transform var(--nav-transition-duration) var(--nav-transition-easing);
}

/* Mobile Navigation Drawer Animation States */
.mobile-nav-drawer--enter {
  transform: translateX(0);
}

.mobile-nav-drawer--exit {
  transform: translateX(100%);
}